; generated by Component: ARM Compiler 5.06 update 4 (build 422) Tool: ArmCC [4d3604]
; commandline ArmCC [--list --split_sections --debug -c --asm --interleave -o.\obj\drv_kt_wirelessmicrx.o --asm_dir=.\lst\ --list_dir=.\lst\ --depend=.\obj\drv_kt_wirelessmicrx.d --cpu=Cortex-M0 --apcs=interwork --diag_suppress=9931 -I..\lib\CMSIS\Include -I..\lib\Device\Nuvoton\NUC029xGE\Include -I..\lib\StdDriver\inc -I..\src\core\include -I..\src\driver\include -I..\src\io\include -I..\src\global -I..\src\server\include -D__UVISION_VERSION=522 --omf_browse=.\obj\drv_kt_wirelessmicrx.crf ..\src\driver\drv_KT_WirelessMicRx.c]
                          THUMB

                          AREA ||i.KT_Bus_Read||, CODE, READONLY, ALIGN=2

                  KT_Bus_Read PROC
;;;141    //-----------------------------------------------------------------------------
;;;142    uint8_t KT_Bus_Read(uint16_t Register_Address,uint8_t chipNum)
000000  b510              PUSH     {r4,lr}
;;;143    {
;;;144        uint8_t data = 0;
;;;145    //	uint8_t arr[] = {0x00,0x00};
;;;146    
;;;147        switch(chipNum)
;;;148        {
;;;149    #ifdef DIVERSITY
;;;150        #ifdef TWOCHANNEL
;;;151            case 0: return( I2C_ReadByteTwoRegs(I2C1, KTWirelessMicRxr_addressAM, Register_Address) );break;
;;;152            case 1: return( I2C_ReadByteTwoRegs(I2C1, KTWirelessMicRxr_addressAS, Register_Address) );break;
;;;153            case 2: return( I2C_ReadByteTwoRegs(I2C1, KTWirelessMicRxr_addressBM, Register_Address) );break;
;;;154            case 3: return( I2C_ReadByteTwoRegs(I2C1, KTWirelessMicRxr_addressBS, Register_Address) );break;
;;;155        #else
;;;156            case 0: return( I2C_ReadByteTwoRegs(I2C1, KTWirelessMicRxr_addressAM, Register_Address) );break;
;;;157            case 1: return( I2C_ReadByteTwoRegs(I2C1, KTWirelessMicRxr_addressAS, Register_Address) );break;
;;;158           #endif
;;;159    #else
;;;160        #ifdef TWOCHANNEL
;;;161    	
;;;162            case 0: 
;;;163    //			arr[0] = (Register_Address & 0xFF00) >> 8;
;;;164    //			printf("data = %x\n",data);
;;;165    //			arr[1] = Register_Address & 0xFF;
;;;166    //			printf("chipnum, Register_Address =%d, %x\n",chipNum,Register_Address);
;;;167    			
;;;168    			//printf("a************\n");
;;;169    			//data = Hal_I2c1_Transfer(0x72, arr, sizeof(arr), (uint8_t*)NULL, 1);
;;;170    			//printf("data = %x\n",data);
;;;171    			//printf("//////////////////////\n");
;;;172    			data = I2C_ReadByteTwoRegs(I2C1, KTWirelessMicRxr_addressAM, Register_Address);
000002  4b07              LDR      r3,|L1.32|
000004  2900              CMP      r1,#0                 ;147
000006  d002              BEQ      |L1.14|
000008  2901              CMP      r1,#1                 ;147
00000a  d003              BEQ      |L1.20|
                  |L1.12|
;;;173    //			printf("data = %x\n",data);
;;;174    			return data;
;;;175    			break;
;;;176            	
;;;177            case 1: 
;;;178    
;;;179    			return( I2C_ReadByteTwoRegs(I2C1, KTWirelessMicRxr_addressBM, Register_Address) );
;;;180    
;;;181    		break;
;;;182           #else
;;;183            case 0: return( I2C_ReadByteTwoRegs(I2C1, KTWirelessMicRxr_addressAM, Register_Address) );break;
;;;184           #endif
;;;185    #endif
;;;186    		default:while(1);
00000c  e7fe              B        |L1.12|
                  |L1.14|
00000e  4602              MOV      r2,r0                 ;172
000010  2139              MOVS     r1,#0x39              ;172
000012  e001              B        |L1.24|
                  |L1.20|
000014  4602              MOV      r2,r0                 ;179
000016  2131              MOVS     r1,#0x31              ;179
                  |L1.24|
000018  4618              MOV      r0,r3                 ;179
00001a  f7fffffe          BL       I2C_ReadByteTwoRegs
;;;187        }
;;;188    }
00001e  bd10              POP      {r4,pc}
;;;189    
                          ENDP

                  |L1.32|
                          DCD      0x40120000

                          AREA ||i.KT_Bus_Write||, CODE, READONLY, ALIGN=2

                  KT_Bus_Write PROC
;;;105    //-----------------------------------------------------------------------------
;;;106    void KT_Bus_Write(uint16_t Register_Address, uint8_t Byte_Data,uint8_t chipNum)
000000  b510              PUSH     {r4,lr}
;;;107    {
;;;108        switch(chipNum)
;;;109        {
;;;110    #ifdef DIVERSITY
;;;111        #ifdef TWOCHANNEL
;;;112            case 0: I2C_WriteByteTwoRegs(I2C1, KTWirelessMicRxw_addressAM,Register_Address,Byte_Data);break;
;;;113            case 1: I2C_WriteByteTwoRegs(I2C1, KTWirelessMicRxw_addressAS,Register_Address,Byte_Data);break;
;;;114            case 2: I2C_WriteByteTwoRegs(I2C1, KTWirelessMicRxw_addressBM,Register_Address,Byte_Data);break;
;;;115            case 3: I2C_WriteByteTwoRegs(I2C1, KTWirelessMicRxw_addressBS,Register_Address,Byte_Data);break;
;;;116        #else
;;;117            case 0: I2C_WriteByteTwoRegs(I2C1, KTWirelessMicRxw_addressAM,Register_Address,Byte_Data);break;
;;;118            case 1: I2C_WriteByteTwoRegs(I2C1, KTWirelessMicRxw_addressAS,Register_Address,Byte_Data);break;
;;;119           #endif
;;;120    #else
;;;121        #ifdef TWOCHANNEL
;;;122            case 0: I2C_WriteByteTwoRegs(I2C1, KTWirelessMicRxw_addressAM,Register_Address,Byte_Data);break;
000002  4c08              LDR      r4,|L2.36|
000004  2a00              CMP      r2,#0                 ;108
000006  d008              BEQ      |L2.26|
000008  2a01              CMP      r2,#1                 ;108
00000a  d105              BNE      |L2.24|
;;;123            case 1: I2C_WriteByteTwoRegs(I2C1, KTWirelessMicRxw_addressBM,Register_Address,Byte_Data);break;
00000c  460b              MOV      r3,r1
00000e  4602              MOV      r2,r0
000010  2131              MOVS     r1,#0x31
                  |L2.18|
000012  4620              MOV      r0,r4                 ;122
000014  f7fffffe          BL       I2C_WriteByteTwoRegs
                  |L2.24|
;;;124           #else
;;;125            case 0: I2C_WriteByteTwoRegs(I2C1, KTWirelessMicRxw_addressAM,Register_Address,Byte_Data);break;
;;;126           #endif
;;;127    #endif
;;;128        }
;;;129    }
000018  bd10              POP      {r4,pc}
                  |L2.26|
00001a  460b              MOV      r3,r1                 ;122
00001c  4602              MOV      r2,r0                 ;122
00001e  2139              MOVS     r1,#0x39              ;122
000020  e7f7              B        |L2.18|
;;;130    
                          ENDP

000022  0000              DCW      0x0000
                  |L2.36|
                          DCD      0x40120000

                          AREA ||i.KT_MicARX_Init||, CODE, READONLY, ALIGN=2

                  KT_MicARX_Init PROC
;;;1962   //-----------------------------------------------------------------------------
;;;1963   void  KT_MicARX_Init(void)
000000  b510              PUSH     {r4,lr}
                  |L3.2|
;;;1964   {
;;;1965       while(!KT_WirelessMicRx_Init());
000002  f7fffffe          BL       KT_WirelessMicRx_Init
000006  2800              CMP      r0,#0
000008  d0fb              BEQ      |L3.2|
;;;1966       KT_WirelessMicRx_Tune(671250);
00000a  4803              LDR      r0,|L3.24|
00000c  f7fffffe          BL       KT_WirelessMicRx_Tune
;;;1967       //KT_WirelessMicRx_Tune(645250);
;;;1968       KT_WirelessMicRx_Volume(PRESET_VOL);
000010  201f              MOVS     r0,#0x1f
000012  f7fffffe          BL       KT_WirelessMicRx_Volume
;;;1969       //displayFreq();    
;;;1970   }
000016  bd10              POP      {r4,pc}
;;;1971   
                          ENDP

                  |L3.24|
                          DCD      0x000a3e12

                          AREA ||i.KT_MicBRX_Init||, CODE, READONLY, ALIGN=2

                  KT_MicBRX_Init PROC
;;;1971   
;;;1972   void  KT_MicBRX_Init(void)
000000  b510              PUSH     {r4,lr}
                  |L4.2|
;;;1973   {
;;;1974       while(!KT_WirelessMicRx_Init());
000002  f7fffffe          BL       KT_WirelessMicRx_Init
000006  2800              CMP      r0,#0
000008  d0fb              BEQ      |L4.2|
;;;1975      // KT_WirelessMicRx_Tune(671250);
;;;1976       KT_WirelessMicRx_Tune(680250);
00000a  4803              LDR      r0,|L4.24|
00000c  f7fffffe          BL       KT_WirelessMicRx_Tune
;;;1977       KT_WirelessMicRx_Volume(PRESET_VOL);
000010  201f              MOVS     r0,#0x1f
000012  f7fffffe          BL       KT_WirelessMicRx_Volume
;;;1978       //displayFreq();    
;;;1979   }
000016  bd10              POP      {r4,pc}
;;;1980   
                          ENDP

                  |L4.24|
                          DCD      0x000a613a

                          AREA ||i.KT_WirelessMicRx_Automute||, CODE, READONLY, ALIGN=2

                  KT_WirelessMicRx_Automute PROC
;;;951    //-----------------------------------------------------------------------------
;;;952    uint8_t KT_WirelessMicRx_Automute(void)
000000  b510              PUSH     {r4,lr}
;;;953    {
;;;954        uint8_t muteFlag;
;;;955        
;;;956        muteFlag = KT_Bus_Read(0x0088,chipSel);
000002  4804              LDR      r0,|L5.20|
000004  7841              LDRB     r1,[r0,#1]  ; chipSel
000006  2088              MOVS     r0,#0x88
000008  f7fffffe          BL       KT_Bus_Read
;;;957        return( muteFlag&0x01);
00000c  07c0              LSLS     r0,r0,#31
00000e  0fc0              LSRS     r0,r0,#31
;;;958    }
000010  bd10              POP      {r4,pc}
;;;959    
                          ENDP

000012  0000              DCW      0x0000
                  |L5.20|
                          DCD      ||.data||

                          AREA ||i.KT_WirelessMicRx_BatteryMeter_Read||, CODE, READONLY, ALIGN=2

                  KT_WirelessMicRx_BatteryMeter_Read PROC
;;;970    //-----------------------------------------------------------------------------
;;;971    uint16_t KT_WirelessMicRx_BatteryMeter_Read(void)
000000  b570              PUSH     {r4-r6,lr}
;;;972    {
;;;973    	int16_t batNumber;
;;;974    	batNumber=(KT_Bus_Read(0x00c0,chipSel));
000002  4d08              LDR      r5,|L6.36|
000004  20c0              MOVS     r0,#0xc0
000006  7869              LDRB     r1,[r5,#1]  ; chipSel
000008  f7fffffe          BL       KT_Bus_Read
;;;975    	batNumber<<=8;
00000c  0200              LSLS     r0,r0,#8
00000e  b204              SXTH     r4,r0
;;;976    	batNumber|=KT_Bus_Read(0x00c1,chipSel);
000010  7869              LDRB     r1,[r5,#1]  ; chipSel
000012  20c1              MOVS     r0,#0xc1
000014  f7fffffe          BL       KT_Bus_Read
000018  4320              ORRS     r0,r0,r4
;;;977    	return (abs(batNumber));
00001a  d500              BPL      |L6.30|
00001c  4240              RSBS     r0,r0,#0
                  |L6.30|
00001e  b280              UXTH     r0,r0
;;;978    }
000020  bd70              POP      {r4-r6,pc}
;;;979    //-----------------------------------------------------------------------------
                          ENDP

000022  0000              DCW      0x0000
                  |L6.36|
                          DCD      ||.data||

                          AREA ||i.KT_WirelessMicRx_CheckAUXCH||, CODE, READONLY, ALIGN=2

                  KT_WirelessMicRx_CheckAUXCH PROC
;;;989    //-----------------------------------------------------------------------------
;;;990    void KT_WirelessMicRx_CheckAUXCH(void)
000000  b510              PUSH     {r4,lr}
;;;991    {
;;;992        uint8_t regx;
;;;993        if(MorSSelect)
000002  4c0e              LDR      r4,|L7.60|
000004  7820              LDRB     r0,[r4,#0]  ; MorSSelect
000006  2800              CMP      r0,#0
000008  d017              BEQ      |L7.58|
;;;994    	{
;;;995        	regx = KT_Bus_Read(0x0057,chipSel);
00000a  7861              LDRB     r1,[r4,#1]  ; chipSel
00000c  2057              MOVS     r0,#0x57
00000e  f7fffffe          BL       KT_Bus_Read
;;;996    	    if(regx&0x10) //pkg_sync int
000012  06c1              LSLS     r1,r0,#27
000014  d511              BPL      |L7.58|
;;;997    	    {
;;;998    	        KT_Bus_Write( 0x0057, regx |0x10 ,chipSel);
000016  2110              MOVS     r1,#0x10
000018  4301              ORRS     r1,r1,r0
00001a  7862              LDRB     r2,[r4,#1]  ; chipSel
00001c  2057              MOVS     r0,#0x57
00001e  f7fffffe          BL       KT_Bus_Write
;;;999    	        regx = KT_Bus_Read(0x0209,chipSel);
000022  7861              LDRB     r1,[r4,#1]  ; chipSel
000024  4806              LDR      r0,|L7.64|
000026  f7fffffe          BL       KT_Bus_Read
;;;1000   	        if(regx&0x40)
00002a  0641              LSLS     r1,r0,#25
;;;1001   	            Flag_PKGSYNC[chipSel] = PKGSYNC;
00002c  4805              LDR      r0,|L7.68|
00002e  d501              BPL      |L7.52|
000030  2101              MOVS     r1,#1
000032  e000              B        |L7.54|
                  |L7.52|
;;;1002   	        else
;;;1003   	            Flag_PKGSYNC[chipSel] = NON_PKGSYNC;
000034  2100              MOVS     r1,#0
                  |L7.54|
000036  7862              LDRB     r2,[r4,#1]  ; chipSel
000038  5481              STRB     r1,[r0,r2]
                  |L7.58|
;;;1004   	    }
;;;1005   	}
;;;1006   	#ifdef DIVERSITY
;;;1007   	else
;;;1008   	{
;;;1009       	regx = KT_Bus_Read(0x0057,chipSel+1);
;;;1010   	    if(regx&0x10) //pkg_sync int
;;;1011   	    {
;;;1012   	        KT_Bus_Write( 0x0057, regx |0x10 ,chipSel+1);
;;;1013   	        regx = KT_Bus_Read(0x0209,chipSel+1);
;;;1014   	        if(regx&0x40)
;;;1015   	            Flag_PKGSYNC[chipSel+1] = PKGSYNC;
;;;1016   	        else
;;;1017   	            Flag_PKGSYNC[chipSel+1] = NON_PKGSYNC;
;;;1018   	    }
;;;1019   	}
;;;1020   	#endif
;;;1021   }
00003a  bd10              POP      {r4,pc}
;;;1022   
                          ENDP

                  |L7.60|
                          DCD      ||.data||
                  |L7.64|
                          DCD      0x00000209
                  |L7.68|
                          DCD      ||.data||+0x2

                          AREA ||i.KT_WirelessMicRx_CheckPilot||, CODE, READONLY, ALIGN=2

                  KT_WirelessMicRx_CheckPilot PROC
;;;1033   //-----------------------------------------------------------------------------
;;;1034   uint8_t KT_WirelessMicRx_CheckPilot(void)
000000  b510              PUSH     {r4,lr}
;;;1035   {
;;;1036       uint8_t pilotFlag;
;;;1037       if(MorSSelect)
000002  4905              LDR      r1,|L8.24|
000004  780a              LDRB     r2,[r1,#0]  ; MorSSelect
000006  2a00              CMP      r2,#0
000008  d003              BEQ      |L8.18|
;;;1038   	{
;;;1039       	pilotFlag = KT_Bus_Read(0x0209,chipSel);
00000a  7849              LDRB     r1,[r1,#1]  ; chipSel
00000c  4803              LDR      r0,|L8.28|
00000e  f7fffffe          BL       KT_Bus_Read
                  |L8.18|
;;;1040   	}
;;;1041   	#ifdef DIVERSITY
;;;1042   	else
;;;1043   	{
;;;1044       	pilotFlag = KT_Bus_Read(0x0209,chipSel+1);
;;;1045   	}
;;;1046   	#endif
;;;1047       return((pilotFlag>>7)&0x01);
000012  09c0              LSRS     r0,r0,#7
;;;1048   }
000014  bd10              POP      {r4,pc}
;;;1049   
                          ENDP

000016  0000              DCW      0x0000
                  |L8.24|
                          DCD      ||.data||
                  |L8.28|
                          DCD      0x00000209

                          AREA ||i.KT_WirelessMicRx_FastTune||, CODE, READONLY, ALIGN=2

                  KT_WirelessMicRx_FastTune PROC
;;;638    //-----------------------------------------------------------------------------
;;;639    void KT_WirelessMicRx_FastTune(long Freq)
000000  b570              PUSH     {r4-r6,lr}
;;;640    {
;;;641        uint8_t Freq_H,Freq_M,Freq_L,regx;
;;;642        
;;;643    #ifdef XTAL_DUAL
;;;644    	#ifdef NEW_SEL_XTAL_MODE
;;;645        	caclXtal(Freq);//select xtal
;;;646    	#else
;;;647    		oldCaclXtal(Freq);
;;;648    	#endif
;;;649    #endif
;;;650        
;;;651    	regx=KT_Bus_Read(0x0108,chipSel);
000002  4c2f              LDR      r4,|L9.192|
000004  26ff              MOVS     r6,#0xff
000006  4605              MOV      r5,r0                 ;640
000008  3609              ADDS     r6,r6,#9
00000a  7861              LDRB     r1,[r4,#1]  ; chipSel
00000c  4630              MOV      r0,r6
00000e  f7fffffe          BL       KT_Bus_Read
;;;652        KT_Bus_Write(0x0108,regx | KT_BIT3,chipSel); //SCAN_MODE=1;
000012  2108              MOVS     r1,#8
000014  4301              ORRS     r1,r1,r0
000016  7862              LDRB     r2,[r4,#1]  ; chipSel
000018  4630              MOV      r0,r6
00001a  f7fffffe          BL       KT_Bus_Write
;;;653    
;;;654    	Freq = Freq & 0x000FFFFF;
00001e  0328              LSLS     r0,r5,#12
000020  0b00              LSRS     r0,r0,#12
;;;655    
;;;656        Freq_H = ( Freq >> 12 );
000022  1301              ASRS     r1,r0,#12
;;;657        Freq_M = ( (Freq & 0x00000FFF) >> 4 );
;;;658        Freq_L = ( (Freq & 0x0000000F) << 4 );
;;;659    
;;;660        KT_Bus_Write(0x0045,Freq_H,chipSel);                
;;;661        KT_Bus_Write(0x0046,Freq_M,chipSel);
;;;662    
;;;663        regx=KT_Bus_Read(0x0047,chipSel);
;;;664        KT_Bus_Write(0x0047,(regx & 0x0F) | Freq_L ,chipSel);
;;;665    
;;;666    	if(KT_Bus_Read(0x010f,chipSel)==0x10)//a
;;;667    	{
;;;668    		regx=KT_Bus_Read(0x0053,chipSel);
;;;669    		KT_Bus_Write(0x0053,regx&~0x40,chipSel);  //rfamp_int_en=0
;;;670    	}
;;;671    
;;;672        regx=KT_Bus_Read(0x0047,chipSel);
;;;673        KT_Bus_Write(0x0047,regx | KT_BIT0,chipSel); //chan_valid=1;
;;;674    
;;;675    	TIMER_Delay(TIMER0, 1000); //delay 10ms
;;;676        while (!(KT_Bus_Read(0x0061,chipSel) & 0x01)); //PLL done
;;;677     	#ifdef I2S_EN
;;;678    	    if(chipSel<chipBM)
;;;679    		{
;;;680    			KT_WirelessMicRx_SAIInit(&chipAI2sConfig);
;;;681    		}
;;;682    		#ifdef TWOCHANNEL
;;;683    		else
;;;684    		{
;;;685    			KT_WirelessMicRx_SAIInit(&chipBI2sConfig);
;;;686    		}
;;;687    		#endif
;;;688    	#endif
;;;689    	if(KT_WirelessMicRx_GetSNR()>AUTOMUTE_SNR_LOWTH)
;;;690    	{
;;;691    		regx=KT_Bus_Read(0x0087,chipSel);			//SOFT_SNR_MUTE写为0
;;;692    		KT_Bus_Write(0x0087,regx&~0x02,chipSel);
;;;693    	}	
;;;694    }
000024  052a              LSLS     r2,r5,#20
000026  0700              LSLS     r0,r0,#28             ;658
000028  0e15              LSRS     r5,r2,#24             ;657
00002a  0e06              LSRS     r6,r0,#24             ;658
00002c  7862              LDRB     r2,[r4,#1]            ;660  ; chipSel
00002e  2045              MOVS     r0,#0x45              ;660
000030  f7fffffe          BL       KT_Bus_Write
000034  7862              LDRB     r2,[r4,#1]            ;661  ; chipSel
000036  4629              MOV      r1,r5                 ;661
000038  2046              MOVS     r0,#0x46              ;661
00003a  f7fffffe          BL       KT_Bus_Write
00003e  7861              LDRB     r1,[r4,#1]            ;663  ; chipSel
000040  2047              MOVS     r0,#0x47              ;663
000042  f7fffffe          BL       KT_Bus_Read
000046  0701              LSLS     r1,r0,#28             ;664
000048  0f09              LSRS     r1,r1,#28             ;664
00004a  4331              ORRS     r1,r1,r6              ;664
00004c  7862              LDRB     r2,[r4,#1]            ;664  ; chipSel
00004e  2047              MOVS     r0,#0x47              ;664
000050  f7fffffe          BL       KT_Bus_Write
000054  20ff              MOVS     r0,#0xff              ;666
000056  7861              LDRB     r1,[r4,#1]            ;666  ; chipSel
000058  3010              ADDS     r0,r0,#0x10           ;666
00005a  f7fffffe          BL       KT_Bus_Read
00005e  2810              CMP      r0,#0x10              ;666
000060  d109              BNE      |L9.118|
000062  7861              LDRB     r1,[r4,#1]            ;668  ; chipSel
000064  2053              MOVS     r0,#0x53              ;668
000066  f7fffffe          BL       KT_Bus_Read
00006a  21bf              MOVS     r1,#0xbf              ;669
00006c  4001              ANDS     r1,r1,r0              ;669
00006e  7862              LDRB     r2,[r4,#1]            ;669  ; chipSel
000070  2053              MOVS     r0,#0x53              ;669
000072  f7fffffe          BL       KT_Bus_Write
                  |L9.118|
000076  7861              LDRB     r1,[r4,#1]            ;672  ; chipSel
000078  2047              MOVS     r0,#0x47              ;672
00007a  f7fffffe          BL       KT_Bus_Read
00007e  2101              MOVS     r1,#1                 ;673
000080  4301              ORRS     r1,r1,r0              ;673
000082  7862              LDRB     r2,[r4,#1]            ;673  ; chipSel
000084  2047              MOVS     r0,#0x47              ;673
000086  f7fffffe          BL       KT_Bus_Write
00008a  217d              MOVS     r1,#0x7d              ;675
00008c  00c9              LSLS     r1,r1,#3              ;675
00008e  480d              LDR      r0,|L9.196|
000090  f7fffffe          BL       TIMER_Delay
                  |L9.148|
000094  7861              LDRB     r1,[r4,#1]            ;676  ; chipSel
000096  2061              MOVS     r0,#0x61              ;676
000098  f7fffffe          BL       KT_Bus_Read
00009c  07c0              LSLS     r0,r0,#31             ;676
00009e  d0f9              BEQ      |L9.148|
0000a0  f7fffffe          BL       KT_WirelessMicRx_GetSNR
0000a4  2878              CMP      r0,#0x78              ;689
0000a6  d909              BLS      |L9.188|
0000a8  7861              LDRB     r1,[r4,#1]            ;691  ; chipSel
0000aa  2087              MOVS     r0,#0x87              ;691
0000ac  f7fffffe          BL       KT_Bus_Read
0000b0  21fd              MOVS     r1,#0xfd              ;692
0000b2  4001              ANDS     r1,r1,r0              ;692
0000b4  7862              LDRB     r2,[r4,#1]            ;692  ; chipSel
0000b6  2087              MOVS     r0,#0x87              ;692
0000b8  f7fffffe          BL       KT_Bus_Write
                  |L9.188|
0000bc  bd70              POP      {r4-r6,pc}
;;;695    
                          ENDP

0000be  0000              DCW      0x0000
                  |L9.192|
                          DCD      ||.data||
                  |L9.196|
                          DCD      0x40010000

                          AREA ||i.KT_WirelessMicRx_GetAF||, CODE, READONLY, ALIGN=2

                  KT_WirelessMicRx_GetAF PROC
;;;859    //-----------------------------------------------------------------------------
;;;860    uint8_t KT_WirelessMicRx_GetAF(void)
000000  b510              PUSH     {r4,lr}
;;;861    {
;;;862        uint16_t regx;
;;;863        regx = KT_Bus_Read(0x0209,chipSel);
000002  4804              LDR      r0,|L10.20|
000004  7841              LDRB     r1,[r0,#1]  ; chipSel
000006  4804              LDR      r0,|L10.24|
000008  f7fffffe          BL       KT_Bus_Read
;;;864        return( regx & 0x0F );
00000c  0700              LSLS     r0,r0,#28
00000e  0f00              LSRS     r0,r0,#28
;;;865    }
000010  bd10              POP      {r4,pc}
;;;866    
                          ENDP

000012  0000              DCW      0x0000
                  |L10.20|
                          DCD      ||.data||
                  |L10.24|
                          DCD      0x00000209

                          AREA ||i.KT_WirelessMicRx_GetFastRSSI||, CODE, READONLY, ALIGN=2

                  KT_WirelessMicRx_GetFastRSSI PROC
;;;902    //-----------------------------------------------------------------------------
;;;903    uint8_t KT_WirelessMicRx_GetFastRSSI(void)
000000  b510              PUSH     {r4,lr}
;;;904    {
;;;905        uint8_t cRssi;
;;;906        if(MorSSelect)
000002  4806              LDR      r0,|L11.28|
000004  4905              LDR      r1,|L11.28|
000006  7800              LDRB     r0,[r0,#0]  ; MorSSelect
;;;907    	{
;;;908        	cRssi = KT_Bus_Read(0x020A,chipSel);
000008  7849              LDRB     r1,[r1,#1]
00000a  2800              CMP      r0,#0                 ;906
00000c  d001              BEQ      |L11.18|
00000e  4804              LDR      r0,|L11.32|
000010  e001              B        |L11.22|
                  |L11.18|
;;;909    	}
;;;910    	else
;;;911    	{
;;;912    		cRssi = KT_Bus_Read(0x0222,chipSel);
000012  4803              LDR      r0,|L11.32|
000014  3018              ADDS     r0,r0,#0x18
                  |L11.22|
000016  f7fffffe          BL       KT_Bus_Read
;;;913    	}
;;;914        return( cRssi );
;;;915    }
00001a  bd10              POP      {r4,pc}
;;;916    //-----------------------------------------------------------------------------
                          ENDP

                  |L11.28|
                          DCD      ||.data||
                  |L11.32|
                          DCD      0x0000020a

                          AREA ||i.KT_WirelessMicRx_GetRSSI||, CODE, READONLY, ALIGN=2

                  KT_WirelessMicRx_GetRSSI PROC
;;;877    //-----------------------------------------------------------------------------
;;;878    uint8_t KT_WirelessMicRx_GetRSSI(void)
000000  b510              PUSH     {r4,lr}
;;;879    {
;;;880        uint8_t cRssi;
;;;881        if(MorSSelect)
000002  4806              LDR      r0,|L12.28|
000004  4905              LDR      r1,|L12.28|
000006  7800              LDRB     r0,[r0,#0]  ; MorSSelect
;;;882    	{
;;;883        	cRssi = KT_Bus_Read(0x020C,chipSel);
000008  7849              LDRB     r1,[r1,#1]
00000a  2800              CMP      r0,#0                 ;881
00000c  d002              BEQ      |L12.20|
00000e  2083              MOVS     r0,#0x83
000010  0080              LSLS     r0,r0,#2
000012  e000              B        |L12.22|
                  |L12.20|
;;;884    	}
;;;885    	else
;;;886    	{
;;;887    		cRssi = KT_Bus_Read(0x0221,chipSel);
000014  4802              LDR      r0,|L12.32|
                  |L12.22|
000016  f7fffffe          BL       KT_Bus_Read
;;;888    	}
;;;889        return( cRssi );
;;;890    }
00001a  bd10              POP      {r4,pc}
;;;891    
                          ENDP

                  |L12.28|
                          DCD      ||.data||
                  |L12.32|
                          DCD      0x00000221

                          AREA ||i.KT_WirelessMicRx_GetSNR||, CODE, READONLY, ALIGN=2

                  KT_WirelessMicRx_GetSNR PROC
;;;926    //-----------------------------------------------------------------------------
;;;927    uint8_t KT_WirelessMicRx_GetSNR(void)
000000  b510              PUSH     {r4,lr}
;;;928    {
;;;929        uint8_t snr;
;;;930        if(MorSSelect)
000002  4806              LDR      r0,|L13.28|
000004  4905              LDR      r1,|L13.28|
000006  7800              LDRB     r0,[r0,#0]  ; MorSSelect
;;;931    	{
;;;932        	snr = KT_Bus_Read(0x020D,chipSel);
000008  7849              LDRB     r1,[r1,#1]
00000a  2800              CMP      r0,#0                 ;930
00000c  d001              BEQ      |L13.18|
00000e  4804              LDR      r0,|L13.32|
000010  e001              B        |L13.22|
                  |L13.18|
;;;933    	}
;;;934    	else
;;;935    	{
;;;936        	snr = KT_Bus_Read(0x0223 ,chipSel);
000012  4803              LDR      r0,|L13.32|
000014  3016              ADDS     r0,r0,#0x16
                  |L13.22|
000016  f7fffffe          BL       KT_Bus_Read
;;;937    	}
;;;938        return( snr );
;;;939    }
00001a  bd10              POP      {r4,pc}
;;;940    
                          ENDP

                  |L13.28|
                          DCD      ||.data||
                  |L13.32|
                          DCD      0x0000020d

                          AREA ||i.KT_WirelessMicRx_Init||, CODE, READONLY, ALIGN=2

                  KT_WirelessMicRx_Init PROC
;;;270    //-----------------------------------------------------------------------------
;;;271    bool KT_WirelessMicRx_Init(void)
000000  b5f8              PUSH     {r3-r7,lr}
;;;272    {
;;;273        uint8_t regx;
;;;274    
;;;275        while(!(KT_Bus_Read(0x007F,chipSel) & 0x01)); //power_on finish
000002  4ebc              LDR      r6,|L14.756|
                  |L14.4|
000004  207f              MOVS     r0,#0x7f
000006  7871              LDRB     r1,[r6,#1]  ; chipSel
000008  f7fffffe          BL       KT_Bus_Read
00000c  07c0              LSLS     r0,r0,#31
00000e  d0f9              BEQ      |L14.4|
;;;276        
;;;277    //    regx=KT_Bus_Read(0x007F,chipSel);
;;;278    //    KT_Bus_Write(0x007F,(regx & 0xfe),chipSel); // power_on finish写0,在while（1）中读到power_on finish=1时，说明芯片重启了
;;;279    
;;;280    	regx=KT_Bus_Read(0x010f,chipSel);//FIRMWARE_VERSION
000010  20ff              MOVS     r0,#0xff
000012  7871              LDRB     r1,[r6,#1]  ; chipSel
000014  3010              ADDS     r0,r0,#0x10
000016  f7fffffe          BL       KT_Bus_Read
;;;281    	if((regx!=0x10)&&(regx!=0x11))
00001a  2810              CMP      r0,#0x10
00001c  d003              BEQ      |L14.38|
00001e  2811              CMP      r0,#0x11
000020  d001              BEQ      |L14.38|
;;;282    		return 0;
000022  2000              MOVS     r0,#0
;;;283    
;;;284    	regx = KT_Bus_Read(0x0108,chipSel);          
;;;285        KT_Bus_Write(0x0108,(regx&0x1f)|(XTAL_SEL1<<7)|(XTAL_SEL2<<6)|(HLSI_INV<<5),chipSel); //hlsi
;;;286    
;;;287    	regx = KT_Bus_Read(0x001f,chipSel); 
;;;288    	KT_Bus_Write(0x001f,(regx&0x1f)|0x40,chipSel); //0.4V
;;;289    
;;;290    	KT_Bus_Write(0x000d,0xcf,chipSel); //6mA
;;;291    
;;;292    	//可通过0x16<5:0>的变化体现，注意:由于由软件完成该过程，改变此值后要重新tune台
;;;293    	KT_Bus_Write(0x0109,0x90,chipSel); //pll noise增加3db  KVCO coarse aim=120MHz/V
;;;294    
;;;295    //	regx = KT_Bus_Read(0x0224,chipSel);
;;;296    //	KT_Bus_Write(0x0224,(regx&0x9f)|0x20,chipSel); //audio_gain=1 增加3.5db
;;;297    
;;;298    #ifdef AUTOMUTE_EN
;;;299    
;;;300        KT_Bus_Write(0x0082,0x89,chipSel); //fast_rssi_mute_th=0x89
;;;301    	//auto_mute control
;;;302        regx=KT_Bus_Read(0x0081,chipSel);
;;;303        KT_Bus_Write(0x0081,(regx & 0x8f) | (FAST_RSSI_MUTE_EN<<6) |
;;;304                     (FAST_RSSI_PD_MUTE_EN<<5) | (SUPER_RSSI_MUTE_EN<<4), chipSel); 
;;;305    
;;;306        KT_Bus_Write(0x0079,AUTOMUTE_SNR_LOWTH,chipSel); 
;;;307        KT_Bus_Write(0x007a,AUTOMUTE_SNR_HIGHTH,chipSel); 
;;;308    
;;;309    	regx=KT_Bus_Read(0x0201,chipSel);
;;;310        KT_Bus_Write(0x0201,regx|0x80,chipSel); //NBW=1
;;;311    //  KT_Bus_Write(0x0201,regx&~0x80,chipSel); //NBW=0
;;;312    
;;;313        regx=KT_Bus_Read(0x0100,chipSel);
;;;314    //  KT_Bus_Write(0x0100,(regx & 0xDF) | (0<<5),chipSel); //automute_snr_en=0
;;;315        KT_Bus_Write(0x0100,(regx & 0xDF) | (1<<5),chipSel); //automute_snr_en=1
;;;316    
;;;317        
;;;318        regx=KT_Bus_Read(0x0100,chipSel);
;;;319    #ifdef TWOCHANNEL
;;;320        if(chipSel<chipBM)	//A 通道的主或者从
;;;321    #endif
;;;322        {
;;;323            if((soundA.pilotFlag&0x01)==1)
;;;324            {
;;;325                KT_Bus_Write(0x0100,regx|0x80,chipSel);    //开导频检测          
;;;326            }
;;;327            else
;;;328            {
;;;329                KT_Bus_Write(0x0100,regx&0x7f,chipSel);   //关导频检测           
;;;330            }
;;;331        }
;;;332    #ifdef TWOCHANNEL
;;;333        else
;;;334        {
;;;335            if((soundB.pilotFlag&0x01)==1)
;;;336            {
;;;337                KT_Bus_Write(0x0100,regx|0x80,chipSel);              
;;;338            }
;;;339            else
;;;340            {
;;;341                KT_Bus_Write(0x0100,regx&0x7f,chipSel);              
;;;342            }
;;;343        }
;;;344    #endif
;;;345    	 regx = KT_Bus_Read(0x0225,chipSel); //DC_NOTCH_MUTE_EN=1
;;;346         KT_Bus_Write(0x0225,regx&0xf1,chipSel);
;;;347    
;;;348    //    regx=KT_Bus_Read(0x0053,chipSel);
;;;349    //    KT_Bus_Write(0x0053,regx|0x10,chipSel); //BPSK_PKG_SYN_INT_EN=1
;;;350    #else
;;;351    	 regx = KT_Bus_Read(0x0225,chipSel); //DC_NOTCH_MUTE_EN=0
;;;352         KT_Bus_Write(0x0225,regx&0xf0,chipSel);
;;;353    #endif
;;;354    
;;;355    #ifdef SQUEAL_EN
;;;356        regx=KT_Bus_Read(0x026f,chipSel);
;;;357        KT_Bus_Write( 0x026f, (regx & 0xC0) | (SQUEAL_ELIM_EN << 5) |(SQEUAL_DET_EN << 3) | (FNOTCH_NOTRESP_TH << 2) | (N_OCTAVE << 0),chipSel);
;;;358        regx=KT_Bus_Read(0x0270,chipSel);
;;;359        KT_Bus_Write( 0x0270, (regx & 0x00) | (FFT_R_TH << 4) | (FRAME_NUM_TH << 0),chipSel);
;;;360        regx=KT_Bus_Read(0x0271,chipSel);
;;;361        KT_Bus_Write( 0x0271, (regx & 0x00) | (PMAX_HITH << 4) | (PMAX_LOWTH << 0),chipSel);
;;;362        regx=KT_Bus_Read(0x0272,chipSel);
;;;363        KT_Bus_Write( 0x0272, (regx & 0x00) | (FDIFF_HITH << 4) | (FDIFF_LOWTH << 0),chipSel);
;;;364    #endif
;;;365    
;;;366        //config for bpsk
;;;367        regx = KT_Bus_Read(0x241,chipSel);          
;;;368        KT_Bus_Write(0x241,(regx & 0x3f) | (AUXDATA_EN<<7)|(BPSK_NEW_MODE<<6),chipSel); //bpsk enable bpsk new mode
;;;369        regx = KT_Bus_Read(0x243,chipSel);          
;;;370        KT_Bus_Write(0x243,(regx & 0x88) | (AUX_CARRY_NUM<<4)| CARRY_NUM_TH,chipSel); //载波个数为22 载波判决门限18 
;;;371        regx = KT_Bus_Read(0x245,chipSel);          
;;;372        KT_Bus_Write(0x245,0x22,chipSel); //解析过程中连续正确和错误（可以不连续）的数据包数都为2
;;;373    
;;;374        regx = KT_Bus_Read(0x0200,chipSel);          
;;;375        KT_Bus_Write(0x0200,(regx&0x8f)|(ADJUST_GAIN<<4),chipSel); //adjust gain =50kHz
;;;376                                          
;;;377    	regx = KT_Bus_Read(0x010e,chipSel);		  	 //AFC CTRL FSM使能控制位disable
;;;378    	if(KT_Bus_Read(0x010f,chipSel)==0x10)//a
;;;379    	{
;;;380    		KT_Bus_Write(0x010e,regx&0xfe,chipSel);
;;;381    	}
;;;382    	else//b版本
;;;383    	{
;;;384    		KT_Bus_Write(0x010e,regx|0x01,chipSel);
;;;385    	}
;;;386    
;;;387    	regx=KT_Bus_Read(0x0087,chipSel);			//SOFT_AFC_MUTE写为0
;;;388    	KT_Bus_Write(0x0087,regx&~0x08,chipSel);
;;;389    
;;;390        regx = KT_Bus_Read(0x0217,chipSel); //
;;;391        KT_Bus_Write(0x0217,(regx&0x3f)|(AFC_RNG<<6)|0x01,chipSel);	// +/-60kHz;
;;;392    
;;;393    	KT_Bus_Write(0x0218,0x02,chipSel); //afc_en=1  AFC_FROZEN=0
;;;394    //	KT_Bus_Write(0x0218,0x00,chipSel); //afc_en=0
;;;395    
;;;396        regx = KT_Bus_Read(0x0256,chipSel); //comp_tc=1
;;;397        KT_Bus_Write(0x0256,(regx&0x8f)|0x10,chipSel); 
;;;398    
;;;399    	regx = KT_Bus_Read(0x002d,chipSel); //vtr_momitor_en=1
;;;400        KT_Bus_Write(0x002d,regx|0x08,chipSel); 
;;;401    
;;;402    	regx = KT_Bus_Read(0x0010,chipSel); //ref_vtr_vth_sel=1
;;;403        KT_Bus_Write(0x0010,regx|0x80,chipSel);
;;;404    
;;;405    
;;;406    	#ifdef DIVERSITY
;;;407    		#ifdef TWOCHANNEL
;;;408    		if((chipSel==chipAS)||(chipSel==chipBS))
;;;409    		#else
;;;410    		if(chipSel==chipAS)
;;;411    		#endif
;;;412    		{
;;;413    			regx=KT_Bus_Read(0x0202,chipSel);
;;;414    			KT_Bus_Write(0x0202,regx|0x04,chipSel);	  //SIGINV_  HLSI=1
;;;415    			regx=KT_Bus_Read(0x0255,chipSel);
;;;416    			KT_Bus_Write(0x0255,regx|0x10,chipSel);	  //AUDIO_INV=1
;;;417    		}
;;;418    	#endif
;;;419    
;;;420    	regx=KT_Bus_Read(0x0030,chipSel);
;;;421    	KT_Bus_Write(0x0030,regx & ~KT_BIT7,chipSel);//LO_LOCK_DET_PD=0
;;;422    
;;;423    //	regx = KT_Bus_Read(0x0133,chipSel);          
;;;424    //    KT_Bus_Write(0x0133,(regx|0x20),chipSel); //PLL_UNLOCK_EN=1
;;;425    
;;;426        regx = KT_Bus_Read(0x0133,chipSel);          
;;;427        KT_Bus_Write(0x0133,(regx|0x40),chipSel); //dll_rst_en
;;;428    
;;;429    //	regx = KT_Bus_Read(0x010e,chipSel);          
;;;430    //    KT_Bus_Write(0x010e,(regx|0x06),chipSel); //打开watch dog
;;;431    
;;;432    	regx = KT_Bus_Read(0x010e,chipSel); //天线分集软件状态机需要关闭（用硬件的）
;;;433        KT_Bus_Write(0x010e,regx&0xf7,chipSel);
;;;434    	
;;;435    	//AUDIO_SEL 输出合并信号，需要在天线分集软件状态机需要关闭后在写，因为软件开时会自动改写
;;;436    	regx = KT_Bus_Read(0x021c,chipSel); 
;;;437        KT_Bus_Write(0x021c,regx&0xcf,chipSel);
;;;438    
;;;439    	regx = KT_Bus_Read(0x0108,chipSel);          
;;;440        KT_Bus_Write(0x0108,(regx|0x10),chipSel); //LOBAND_CALI_SCAN_EN=1 for fasttune
;;;441    	while(1)
;;;442    	{		
;;;443    //		printf("while1\n");
;;;444    		TIMER_Delay(TIMER0, 10000);	//delay 10ms
;;;445    		if(0==(0x10&KT_Bus_Read(0x0108,chipSel)))
;;;446    		break;
;;;447    	}
;;;448    	#ifdef KT0655M
;;;449    	regx=KT_Bus_Read(0x003a,chipSel);
;;;450    	KT_Bus_Write(0x003a,(regx & 0x1f),chipSel);	//line in 相关电源打开
;;;451    	TIMER_Delay(TIMER0, 10000); //delay 10ms
;;;452    	regx=KT_Bus_Read(0x003c,chipSel);
;;;453    	KT_Bus_Write(0x003c,(regx & 0x7f),chipSel);	//au_dig_rst=0
;;;454    	TIMER_Delay(TIMER0, 15000); //delay 15ms
;;;455    	regx=KT_Bus_Read(0x0330,chipSel);
;;;456    	KT_Bus_Write(0x0330,(regx | 0x3f),chipSel);	//line_in en=1
;;;457    	
;;;458    	regx=KT_Bus_Read(0x0234,chipSel);
;;;459    	KT_Bus_Write(0x0234,(regx | 0x04),chipSel);//	打开有线输入信号
;;;460    	
;;;461    	regx=KT_Bus_Read(0x0331,chipSel);
;;;462    	KT_Bus_Write(0x0331,(regx & 0xfe)|LINEIN_AGC_DIS,chipSel);//LINEIN_AGC_DIS
;;;463    
;;;464    	regx=KT_Bus_Read(0x0333,chipSel);
;;;465    	KT_Bus_Write(0x0333,(regx & ~0x30)|(COMPEN_GAIN<<4),chipSel);//COMPEN_GAIN
;;;466    	
;;;467    	regx=KT_Bus_Read(0x0330,chipSel);
;;;468    	KT_Bus_Write(0x0330,(regx & 0xc1)|(LINEIN_LOCAL_VOL_CTRL<<1),chipSel);//COMPEN_GAIN
;;;469    
;;;470    	regx=KT_Bus_Read(0x0334,chipSel);
;;;471    	KT_Bus_Write(0x0334,(regx & ~0x18)|(PGA_GAIN_SEL<<3),chipSel);//PGA_GAIN_SEL
;;;472    
;;;473    	regx=KT_Bus_Read(0x0336,chipSel);
;;;474    	KT_Bus_Write(0x0336,(regx & 0xc0)|(SLNC_MUTE_TIME<<1)|SLNC_MUTE_DIS,chipSel);//SLNC_MUTE_DIS  SLNC_MUTE_TIME
;;;475    
;;;476    	KT_Bus_Write(0x0337,(SLNC_MUTE_LOW_LEVEL<<4)|SLNC_MUTE_HIGH_LEVEL,chipSel);//SLNC_MUTE_LEVEL
;;;477    
;;;478    	KT_Bus_Write(0x0339,(ALC_DIS<<7)|ALC_VMAX,chipSel);	 //	ALC_DIS ALC_VMAX
;;;479    
;;;480    	regx=KT_Bus_Read(0x033a,chipSel);
;;;481    	KT_Bus_Write(0x033a,(regx & ~0x08)|(ALC_SOFTKNEE<<3),chipSel);//ALC_SOFTKNEE
;;;482    	#endif
;;;483    	
;;;484    	regx = KT_Bus_Read(0x0108,chipSel);          
;;;485        KT_Bus_Write(0x0108,(regx|0x10),chipSel); //LOBAND_CALI_SCAN_EN=1 for fasttune
;;;486    	while(1)
;;;487    	{
;;;488    		TIMER_Delay(TIMER0, 10000);	//delay 10ms
;;;489    		if(0==(0x10&KT_Bus_Read(0x0108,chipSel)))
;;;490    		break;
;;;491    	}
;;;492    	
;;;493    	KT_Bus_Write(0x010b,0x60,chipSel);
;;;494    	
;;;495        return(1);
;;;496    }
000024  bdf8              POP      {r3-r7,pc}
                  |L14.38|
000026  24ff              MOVS     r4,#0xff              ;284
000028  3409              ADDS     r4,r4,#9              ;284
00002a  7871              LDRB     r1,[r6,#1]            ;284  ; chipSel
00002c  4620              MOV      r0,r4                 ;284
00002e  f7fffffe          BL       KT_Bus_Read
000032  06c1              LSLS     r1,r0,#27             ;285
000034  0ec9              LSRS     r1,r1,#27             ;285
000036  7872              LDRB     r2,[r6,#1]            ;285  ; chipSel
000038  4620              MOV      r0,r4                 ;285
00003a  3140              ADDS     r1,r1,#0x40           ;285
00003c  f7fffffe          BL       KT_Bus_Write
000040  7871              LDRB     r1,[r6,#1]            ;287  ; chipSel
000042  201f              MOVS     r0,#0x1f              ;287
000044  f7fffffe          BL       KT_Bus_Read
000048  06c1              LSLS     r1,r0,#27             ;288
00004a  0ec9              LSRS     r1,r1,#27             ;288
00004c  7872              LDRB     r2,[r6,#1]            ;288  ; chipSel
00004e  201f              MOVS     r0,#0x1f              ;288
000050  3140              ADDS     r1,r1,#0x40           ;288
000052  f7fffffe          BL       KT_Bus_Write
000056  7872              LDRB     r2,[r6,#1]            ;290  ; chipSel
000058  21cf              MOVS     r1,#0xcf              ;290
00005a  200d              MOVS     r0,#0xd               ;290
00005c  f7fffffe          BL       KT_Bus_Write
000060  7872              LDRB     r2,[r6,#1]            ;293  ; chipSel
000062  2190              MOVS     r1,#0x90              ;293
000064  1c60              ADDS     r0,r4,#1              ;293
000066  f7fffffe          BL       KT_Bus_Write
00006a  7872              LDRB     r2,[r6,#1]            ;300  ; chipSel
00006c  2189              MOVS     r1,#0x89              ;300
00006e  2082              MOVS     r0,#0x82              ;300
000070  f7fffffe          BL       KT_Bus_Write
000074  7871              LDRB     r1,[r6,#1]            ;302  ; chipSel
000076  2081              MOVS     r0,#0x81              ;302
000078  f7fffffe          BL       KT_Bus_Read
00007c  278f              MOVS     r7,#0x8f              ;303
00007e  4038              ANDS     r0,r0,r7              ;303
000080  2110              MOVS     r1,#0x10              ;303
000082  3060              ADDS     r0,r0,#0x60           ;303
000084  4301              ORRS     r1,r1,r0              ;303
000086  7872              LDRB     r2,[r6,#1]            ;303  ; chipSel
000088  2081              MOVS     r0,#0x81              ;303
00008a  f7fffffe          BL       KT_Bus_Write
00008e  7872              LDRB     r2,[r6,#1]            ;306  ; chipSel
000090  2178              MOVS     r1,#0x78              ;306
000092  2079              MOVS     r0,#0x79              ;306
000094  f7fffffe          BL       KT_Bus_Write
000098  7872              LDRB     r2,[r6,#1]            ;307  ; chipSel
00009a  2180              MOVS     r1,#0x80              ;307
00009c  207a              MOVS     r0,#0x7a              ;307
00009e  f7fffffe          BL       KT_Bus_Write
0000a2  4d95              LDR      r5,|L14.760|
0000a4  7871              LDRB     r1,[r6,#1]            ;309  ; chipSel
0000a6  4628              MOV      r0,r5                 ;309
0000a8  f7fffffe          BL       KT_Bus_Read
0000ac  2480              MOVS     r4,#0x80              ;310
0000ae  4320              ORRS     r0,r0,r4              ;310
0000b0  4601              MOV      r1,r0                 ;310
0000b2  7872              LDRB     r2,[r6,#1]            ;310  ; chipSel
0000b4  4628              MOV      r0,r5                 ;310
0000b6  f7fffffe          BL       KT_Bus_Write
0000ba  0065              LSLS     r5,r4,#1              ;313
0000bc  7871              LDRB     r1,[r6,#1]            ;313  ; chipSel
0000be  4628              MOV      r0,r5                 ;313
0000c0  f7fffffe          BL       KT_Bus_Read
0000c4  2120              MOVS     r1,#0x20              ;315
0000c6  4301              ORRS     r1,r1,r0              ;315
0000c8  7872              LDRB     r2,[r6,#1]            ;315  ; chipSel
0000ca  4628              MOV      r0,r5                 ;315
0000cc  f7fffffe          BL       KT_Bus_Write
0000d0  7871              LDRB     r1,[r6,#1]            ;318  ; chipSel
0000d2  4628              MOV      r0,r5                 ;318
0000d4  f7fffffe          BL       KT_Bus_Read
0000d8  7872              LDRB     r2,[r6,#1]            ;320  ; chipSel
0000da  2a00              CMP      r2,#0                 ;320
0000dc  d007              BEQ      |L14.238|
0000de  4985              LDR      r1,|L14.756|
0000e0  3120              ADDS     r1,r1,#0x20           ;335
                  |L14.226|
0000e2  7a09              LDRB     r1,[r1,#8]            ;335  ; soundB
0000e4  07c9              LSLS     r1,r1,#31             ;335
0000e6  d005              BEQ      |L14.244|
0000e8  4320              ORRS     r0,r0,r4              ;325
0000ea  4601              MOV      r1,r0                 ;325
0000ec  e004              B        |L14.248|
                  |L14.238|
0000ee  4981              LDR      r1,|L14.756|
0000f0  1d09              ADDS     r1,r1,#4              ;323
0000f2  e7f6              B        |L14.226|
                  |L14.244|
0000f4  0641              LSLS     r1,r0,#25             ;329
0000f6  0e49              LSRS     r1,r1,#25             ;329
                  |L14.248|
0000f8  4628              MOV      r0,r5                 ;337
0000fa  f7fffffe          BL       KT_Bus_Write
0000fe  4d7e              LDR      r5,|L14.760|
000100  7871              LDRB     r1,[r6,#1]            ;345  ; chipSel
000102  3524              ADDS     r5,r5,#0x24           ;345
000104  4628              MOV      r0,r5                 ;345
000106  f7fffffe          BL       KT_Bus_Read
00010a  21f1              MOVS     r1,#0xf1              ;346
00010c  4001              ANDS     r1,r1,r0              ;346
00010e  7872              LDRB     r2,[r6,#1]            ;346  ; chipSel
000110  4628              MOV      r0,r5                 ;346
000112  f7fffffe          BL       KT_Bus_Write
000116  4d78              LDR      r5,|L14.760|
000118  7871              LDRB     r1,[r6,#1]            ;367  ; chipSel
00011a  3540              ADDS     r5,r5,#0x40           ;367
00011c  4628              MOV      r0,r5                 ;367
00011e  f7fffffe          BL       KT_Bus_Read
000122  0681              LSLS     r1,r0,#26             ;368
000124  0e89              LSRS     r1,r1,#26             ;368
000126  2040              MOVS     r0,#0x40              ;368
000128  3180              ADDS     r1,r1,#0x80           ;368
00012a  4301              ORRS     r1,r1,r0              ;368
00012c  7872              LDRB     r2,[r6,#1]            ;368  ; chipSel
00012e  4628              MOV      r0,r5                 ;368
000130  f7fffffe          BL       KT_Bus_Write
000134  1cad              ADDS     r5,r5,#2              ;369
000136  7871              LDRB     r1,[r6,#1]            ;369  ; chipSel
000138  4628              MOV      r0,r5                 ;369
00013a  f7fffffe          BL       KT_Bus_Read
00013e  2188              MOVS     r1,#0x88              ;370
000140  4008              ANDS     r0,r0,r1              ;370
000142  4601              MOV      r1,r0                 ;370
000144  3134              ADDS     r1,r1,#0x34           ;370
000146  7872              LDRB     r2,[r6,#1]            ;370  ; chipSel
000148  4628              MOV      r0,r5                 ;370
00014a  f7fffffe          BL       KT_Bus_Write
00014e  1cad              ADDS     r5,r5,#2              ;371
000150  7871              LDRB     r1,[r6,#1]            ;371  ; chipSel
000152  4628              MOV      r0,r5                 ;371
000154  f7fffffe          BL       KT_Bus_Read
000158  7872              LDRB     r2,[r6,#1]            ;372  ; chipSel
00015a  2122              MOVS     r1,#0x22              ;372
00015c  4628              MOV      r0,r5                 ;372
00015e  f7fffffe          BL       KT_Bus_Write
000162  2501              MOVS     r5,#1                 ;374
000164  026d              LSLS     r5,r5,#9              ;374
000166  7871              LDRB     r1,[r6,#1]            ;374  ; chipSel
000168  4628              MOV      r0,r5                 ;374
00016a  f7fffffe          BL       KT_Bus_Read
00016e  4038              ANDS     r0,r0,r7              ;375
000170  4601              MOV      r1,r0                 ;375
000172  3110              ADDS     r1,r1,#0x10           ;375
000174  7872              LDRB     r2,[r6,#1]            ;375  ; chipSel
000176  4628              MOV      r0,r5                 ;375
000178  f7fffffe          BL       KT_Bus_Write
00017c  20ff              MOVS     r0,#0xff              ;377
00017e  7871              LDRB     r1,[r6,#1]            ;377  ; chipSel
000180  300f              ADDS     r0,r0,#0xf            ;377
000182  f7fffffe          BL       KT_Bus_Read
000186  4605              MOV      r5,r0                 ;377
000188  20ff              MOVS     r0,#0xff              ;378
00018a  7871              LDRB     r1,[r6,#1]            ;378  ; chipSel
00018c  3010              ADDS     r0,r0,#0x10           ;378
00018e  f7fffffe          BL       KT_Bus_Read
000192  2810              CMP      r0,#0x10              ;378
000194  d07e              BEQ      |L14.660|
000196  2001              MOVS     r0,#1                 ;384
000198  4629              MOV      r1,r5                 ;384
00019a  4301              ORRS     r1,r1,r0              ;384
                  |L14.412|
00019c  20ff              MOVS     r0,#0xff              ;384
00019e  7872              LDRB     r2,[r6,#1]            ;384  ; chipSel
0001a0  300f              ADDS     r0,r0,#0xf            ;384
0001a2  f7fffffe          BL       KT_Bus_Write
0001a6  7871              LDRB     r1,[r6,#1]            ;387  ; chipSel
0001a8  2087              MOVS     r0,#0x87              ;387
0001aa  f7fffffe          BL       KT_Bus_Read
0001ae  25f7              MOVS     r5,#0xf7              ;388
0001b0  4028              ANDS     r0,r0,r5              ;388
0001b2  4601              MOV      r1,r0                 ;388
0001b4  7872              LDRB     r2,[r6,#1]            ;388  ; chipSel
0001b6  2087              MOVS     r0,#0x87              ;388
0001b8  f7fffffe          BL       KT_Bus_Write
0001bc  484e              LDR      r0,|L14.760|
0001be  7871              LDRB     r1,[r6,#1]            ;390  ; chipSel
0001c0  3016              ADDS     r0,r0,#0x16           ;390
0001c2  f7fffffe          BL       KT_Bus_Read
0001c6  0681              LSLS     r1,r0,#26             ;391
0001c8  0e89              LSRS     r1,r1,#26             ;391
0001ca  2001              MOVS     r0,#1                 ;391
0001cc  3180              ADDS     r1,r1,#0x80           ;391
0001ce  4301              ORRS     r1,r1,r0              ;391
0001d0  4849              LDR      r0,|L14.760|
0001d2  7872              LDRB     r2,[r6,#1]            ;391  ; chipSel
0001d4  3016              ADDS     r0,r0,#0x16           ;391
0001d6  f7fffffe          BL       KT_Bus_Write
0001da  2043              MOVS     r0,#0x43              ;393
0001dc  7872              LDRB     r2,[r6,#1]            ;393  ; chipSel
0001de  2102              MOVS     r1,#2                 ;393
0001e0  00c0              LSLS     r0,r0,#3              ;393
0001e2  f7fffffe          BL       KT_Bus_Write
0001e6  4844              LDR      r0,|L14.760|
0001e8  7871              LDRB     r1,[r6,#1]            ;396  ; chipSel
0001ea  3055              ADDS     r0,r0,#0x55           ;396
0001ec  f7fffffe          BL       KT_Bus_Read
0001f0  4038              ANDS     r0,r0,r7              ;397
0001f2  4601              MOV      r1,r0                 ;397
0001f4  4840              LDR      r0,|L14.760|
0001f6  3110              ADDS     r1,r1,#0x10           ;397
0001f8  7872              LDRB     r2,[r6,#1]            ;397  ; chipSel
0001fa  3055              ADDS     r0,r0,#0x55           ;397
0001fc  f7fffffe          BL       KT_Bus_Write
000200  7871              LDRB     r1,[r6,#1]            ;399  ; chipSel
000202  202d              MOVS     r0,#0x2d              ;399
000204  f7fffffe          BL       KT_Bus_Read
000208  2108              MOVS     r1,#8                 ;400
00020a  4301              ORRS     r1,r1,r0              ;400
00020c  7872              LDRB     r2,[r6,#1]            ;400  ; chipSel
00020e  202d              MOVS     r0,#0x2d              ;400
000210  f7fffffe          BL       KT_Bus_Write
000214  7871              LDRB     r1,[r6,#1]            ;402  ; chipSel
000216  2010              MOVS     r0,#0x10              ;402
000218  f7fffffe          BL       KT_Bus_Read
00021c  4320              ORRS     r0,r0,r4              ;403
00021e  4601              MOV      r1,r0                 ;403
000220  7872              LDRB     r2,[r6,#1]            ;403  ; chipSel
000222  2010              MOVS     r0,#0x10              ;403
000224  f7fffffe          BL       KT_Bus_Write
000228  7871              LDRB     r1,[r6,#1]            ;420  ; chipSel
00022a  2030              MOVS     r0,#0x30              ;420
00022c  f7fffffe          BL       KT_Bus_Read
000230  0641              LSLS     r1,r0,#25             ;421
000232  0e49              LSRS     r1,r1,#25             ;421
000234  7872              LDRB     r2,[r6,#1]            ;421  ; chipSel
000236  2030              MOVS     r0,#0x30              ;421
000238  f7fffffe          BL       KT_Bus_Write
00023c  24ff              MOVS     r4,#0xff              ;426
00023e  3434              ADDS     r4,r4,#0x34           ;426
000240  7871              LDRB     r1,[r6,#1]            ;426  ; chipSel
000242  4620              MOV      r0,r4                 ;426
000244  f7fffffe          BL       KT_Bus_Read
000248  2140              MOVS     r1,#0x40              ;427
00024a  4301              ORRS     r1,r1,r0              ;427
00024c  7872              LDRB     r2,[r6,#1]            ;427  ; chipSel
00024e  4620              MOV      r0,r4                 ;427
000250  f7fffffe          BL       KT_Bus_Write
000254  24ff              MOVS     r4,#0xff              ;432
000256  340f              ADDS     r4,r4,#0xf            ;432
000258  7871              LDRB     r1,[r6,#1]            ;432  ; chipSel
00025a  4620              MOV      r0,r4                 ;432
00025c  f7fffffe          BL       KT_Bus_Read
000260  4028              ANDS     r0,r0,r5              ;433
000262  4601              MOV      r1,r0                 ;433
000264  7872              LDRB     r2,[r6,#1]            ;433  ; chipSel
000266  4620              MOV      r0,r4                 ;433
000268  f7fffffe          BL       KT_Bus_Write
00026c  0064              LSLS     r4,r4,#1              ;436
00026e  7871              LDRB     r1,[r6,#1]            ;436  ; chipSel
000270  4620              MOV      r0,r4                 ;436
000272  f7fffffe          BL       KT_Bus_Read
000276  21cf              MOVS     r1,#0xcf              ;437
000278  4001              ANDS     r1,r1,r0              ;437
00027a  7872              LDRB     r2,[r6,#1]            ;437  ; chipSel
00027c  4620              MOV      r0,r4                 ;437
00027e  f7fffffe          BL       KT_Bus_Write
000282  27ff              MOVS     r7,#0xff              ;439
000284  3709              ADDS     r7,r7,#9              ;439
000286  7871              LDRB     r1,[r6,#1]            ;439  ; chipSel
000288  4638              MOV      r0,r7                 ;439
00028a  f7fffffe          BL       KT_Bus_Read
00028e  2110              MOVS     r1,#0x10              ;440
000290  4301              ORRS     r1,r1,r0              ;440
000292  e000              B        |L14.662|
                  |L14.660|
000294  e02b              B        |L14.750|
                  |L14.662|
000296  7872              LDRB     r2,[r6,#1]            ;440  ; chipSel
000298  4638              MOV      r0,r7                 ;440
00029a  f7fffffe          BL       KT_Bus_Write
00029e  4c17              LDR      r4,|L14.764|
0002a0  4d17              LDR      r5,|L14.768|
                  |L14.674|
0002a2  4621              MOV      r1,r4                 ;444
0002a4  4628              MOV      r0,r5                 ;444
0002a6  f7fffffe          BL       TIMER_Delay
0002aa  7871              LDRB     r1,[r6,#1]            ;445  ; chipSel
0002ac  4638              MOV      r0,r7                 ;445
0002ae  f7fffffe          BL       KT_Bus_Read
0002b2  06c0              LSLS     r0,r0,#27             ;445
0002b4  d4f5              BMI      |L14.674|
0002b6  7871              LDRB     r1,[r6,#1]            ;484  ; chipSel
0002b8  4638              MOV      r0,r7                 ;484
0002ba  f7fffffe          BL       KT_Bus_Read
0002be  2110              MOVS     r1,#0x10              ;485
0002c0  4301              ORRS     r1,r1,r0              ;485
0002c2  7872              LDRB     r2,[r6,#1]            ;485  ; chipSel
0002c4  4638              MOV      r0,r7                 ;485
0002c6  f7fffffe          BL       KT_Bus_Write
                  |L14.714|
0002ca  4621              MOV      r1,r4                 ;488
0002cc  4628              MOV      r0,r5                 ;488
0002ce  f7fffffe          BL       TIMER_Delay
0002d2  7871              LDRB     r1,[r6,#1]            ;489  ; chipSel
0002d4  4638              MOV      r0,r7                 ;489
0002d6  f7fffffe          BL       KT_Bus_Read
0002da  06c0              LSLS     r0,r0,#27             ;489
0002dc  d4f5              BMI      |L14.714|
0002de  20ff              MOVS     r0,#0xff              ;493
0002e0  7872              LDRB     r2,[r6,#1]            ;493  ; chipSel
0002e2  2160              MOVS     r1,#0x60              ;493
0002e4  300c              ADDS     r0,r0,#0xc            ;493
0002e6  f7fffffe          BL       KT_Bus_Write
0002ea  2001              MOVS     r0,#1                 ;495
0002ec  bdf8              POP      {r3-r7,pc}
                  |L14.750|
0002ee  0869              LSRS     r1,r5,#1              ;380
0002f0  0049              LSLS     r1,r1,#1              ;380
0002f2  e753              B        |L14.412|
;;;497    
                          ENDP

                  |L14.756|
                          DCD      ||.data||
                  |L14.760|
                          DCD      0x00000201
                  |L14.764|
                          DCD      0x00002710
                  |L14.768|
                          DCD      0x40010000

                          AREA ||i.KT_WirelessMicRx_Patch||, CODE, READONLY, ALIGN=1

                  KT_WirelessMicRx_Patch PROC
;;;1411   //-----------------------------------------------------------------------------
;;;1412   void KT_WirelessMicRx_Patch(void)
000000  b510              PUSH     {r4,lr}
;;;1413   {
;;;1414   	rfIntCtl();
000002  f7fffffe          BL       rfIntCtl
;;;1415   	pilotMuteRefresh();
000006  f7fffffe          BL       pilotMuteRefresh
;;;1416   	snrMuteRefresh();
00000a  f7fffffe          BL       snrMuteRefresh
;;;1417   }
00000e  bd10              POP      {r4,pc}
;;;1418   
                          ENDP


                          AREA ||i.KT_WirelessMicRx_PreInit||, CODE, READONLY, ALIGN=2

                  KT_WirelessMicRx_PreInit PROC
;;;231    //-----------------------------------------------------------------------------
;;;232    bool KT_WirelessMicRx_PreInit(void)              
000000  b570              PUSH     {r4-r6,lr}
;;;233    {
;;;234        uint8_t regx;
;;;235        uint8_t i;
;;;236    
;;;237        for (i = 0; i < INIT_FAIL_TH; i++)
000002  2400              MOVS     r4,#0
;;;238        {
;;;239        
;;;240       //     printf("chipSel = %d\n",chipSel);
;;;241            regx = KT_Bus_Read(0x0192,chipSel);        //Read Manufactory ID
000004  4d0e              LDR      r5,|L16.64|
000006  26ff              MOVS     r6,#0xff
000008  3693              ADDS     r6,r6,#0x93
                  |L16.10|
00000a  7869              LDRB     r1,[r5,#1]  ; chipSel
00000c  4630              MOV      r0,r6
00000e  f7fffffe          BL       KT_Bus_Read
;;;242       //     printf("regx = %d\n",regx);
;;;243            if (regx == 0x4B)
000012  284b              CMP      r0,#0x4b
000014  d005              BEQ      |L16.34|
000016  1c64              ADDS     r4,r4,#1
000018  b2e4              UXTB     r4,r4                 ;237
00001a  2c03              CMP      r4,#3                 ;237
00001c  d3f5              BCC      |L16.10|
;;;244            {
;;;245                #ifdef KT0656M
;;;246    			regx=KT_Bus_Read(0x002d,chipSel); //dcdc
;;;247    		    KT_Bus_Write(0x002d,(regx & ~0x04)|(DCDC_EN<<2),chipSel);
;;;248    			#endif
;;;249    			KT_WirelessMicRx_Volume(0);
;;;250                return(1);
;;;251            }
;;;252        }
;;;253        return(0);
00001e  2000              MOVS     r0,#0
;;;254    }
000020  bd70              POP      {r4-r6,pc}
                  |L16.34|
000022  7869              LDRB     r1,[r5,#1]            ;246  ; chipSel
000024  202d              MOVS     r0,#0x2d              ;246
000026  f7fffffe          BL       KT_Bus_Read
00002a  2104              MOVS     r1,#4                 ;247
00002c  4301              ORRS     r1,r1,r0              ;247
00002e  786a              LDRB     r2,[r5,#1]            ;247  ; chipSel
000030  202d              MOVS     r0,#0x2d              ;247
000032  f7fffffe          BL       KT_Bus_Write
000036  2000              MOVS     r0,#0                 ;249
000038  f7fffffe          BL       KT_WirelessMicRx_Volume
00003c  2001              MOVS     r0,#1                 ;250
00003e  bd70              POP      {r4-r6,pc}
;;;255    
                          ENDP

                  |L16.64|
                          DCD      ||.data||

                          AREA ||i.KT_WirelessMicRx_SW_Diversity||, CODE, READONLY, ALIGN=2

                  KT_WirelessMicRx_SW_Diversity PROC
;;;806    //-----------------------------------------------------------------------------
;;;807    void KT_WirelessMicRx_SW_Diversity(uint8_t diversity_En)
000000  b570              PUSH     {r4-r6,lr}
;;;808    {
;;;809        uint8_t regx;
;;;810        
;;;811        regx = KT_Bus_Read(0x021c,chipSel); //天线分集
000002  4c0a              LDR      r4,|L17.44|
000004  2587              MOVS     r5,#0x87
000006  4606              MOV      r6,r0                 ;808
000008  00ad              LSLS     r5,r5,#2
00000a  7861              LDRB     r1,[r4,#1]  ; chipSel
00000c  4628              MOV      r0,r5
00000e  f7fffffe          BL       KT_Bus_Read
;;;812        if(diversity_En)
000012  2e00              CMP      r6,#0
000014  d002              BEQ      |L17.28|
;;;813        {        
;;;814            KT_Bus_Write(0x021c,regx|0x40,chipSel);
000016  2140              MOVS     r1,#0x40
000018  4308              ORRS     r0,r0,r1
00001a  e001              B        |L17.32|
                  |L17.28|
;;;815        }
;;;816        else
;;;817        {
;;;818            KT_Bus_Write(0x021c,regx&~0x40,chipSel);
00001c  21bf              MOVS     r1,#0xbf
00001e  4008              ANDS     r0,r0,r1
                  |L17.32|
000020  4601              MOV      r1,r0                 ;814
000022  7862              LDRB     r2,[r4,#1]            ;814  ; chipSel
000024  4628              MOV      r0,r5                 ;814
000026  f7fffffe          BL       KT_Bus_Write
;;;819        }
;;;820    }
00002a  bd70              POP      {r4-r6,pc}
;;;821    
                          ENDP

                  |L17.44|
                          DCD      ||.data||

                          AREA ||i.KT_WirelessMicRx_SW_Echo||, CODE, READONLY, ALIGN=2

                  KT_WirelessMicRx_SW_Echo PROC
;;;706    //-----------------------------------------------------------------------------
;;;707    void KT_WirelessMicRx_SW_Echo(uint8_t cEcho_En)
000000  b570              PUSH     {r4-r6,lr}
;;;708    {
;;;709        uint8_t regx;
;;;710    
;;;711        regx=KT_Bus_Read(0x0266,chipSel);         
000002  4c09              LDR      r4,|L18.40|
000004  4d09              LDR      r5,|L18.44|
000006  4606              MOV      r6,r0                 ;708
000008  7861              LDRB     r1,[r4,#1]  ; chipSel
00000a  4628              MOV      r0,r5
00000c  f7fffffe          BL       KT_Bus_Read
;;;712        KT_Bus_Write(0x0266,(regx & 0x08) | (cEcho_En<<7) | (ECHO_STRU<<6) | 
000010  2108              MOVS     r1,#8
000012  4008              ANDS     r0,r0,r1
000014  01f1              LSLS     r1,r6,#7
000016  4308              ORRS     r0,r0,r1
000018  2147              MOVS     r1,#0x47
00001a  4308              ORRS     r0,r0,r1
00001c  b2c1              UXTB     r1,r0
00001e  7862              LDRB     r2,[r4,#1]  ; chipSel
000020  4628              MOV      r0,r5
000022  f7fffffe          BL       KT_Bus_Write
;;;713                     (ECHO_GAIN_DOWN<<4) | (ECHO_GAIN_UP<<0),chipSel);
;;;714    }
000026  bd70              POP      {r4-r6,pc}
;;;715    
                          ENDP

                  |L18.40|
                          DCD      ||.data||
                  |L18.44|
                          DCD      0x00000266

                          AREA ||i.KT_WirelessMicRx_SW_Equalizer||, CODE, READONLY, ALIGN=2

                  KT_WirelessMicRx_SW_Equalizer PROC
;;;787    //-----------------------------------------------------------------------------
;;;788    void KT_WirelessMicRx_SW_Equalizer(uint8_t cEqualizer_En)
000000  b570              PUSH     {r4-r6,lr}
;;;789    {
;;;790        uint8_t regx;
;;;791    
;;;792        regx=KT_Bus_Read(0x0257,chipSel);         
000002  4c08              LDR      r4,|L19.36|
000004  4d08              LDR      r5,|L19.40|
000006  4606              MOV      r6,r0                 ;789
000008  7861              LDRB     r1,[r4,#1]  ; chipSel
00000a  4628              MOV      r0,r5
00000c  f7fffffe          BL       KT_Bus_Read
;;;793        KT_Bus_Write(0x0257,(regx & 0xDF) | (cEqualizer_En<<5),chipSel);
000010  21df              MOVS     r1,#0xdf
000012  4008              ANDS     r0,r0,r1
000014  0171              LSLS     r1,r6,#5
000016  4308              ORRS     r0,r0,r1
000018  b2c1              UXTB     r1,r0
00001a  7862              LDRB     r2,[r4,#1]  ; chipSel
00001c  4628              MOV      r0,r5
00001e  f7fffffe          BL       KT_Bus_Write
;;;794    }
000022  bd70              POP      {r4-r6,pc}
;;;795    
                          ENDP

                  |L19.36|
                          DCD      ||.data||
                  |L19.40|
                          DCD      0x00000257

                          AREA ||i.KT_WirelessMicRx_SW_Exciter||, CODE, READONLY, ALIGN=2

                  KT_WirelessMicRx_SW_Exciter PROC
;;;748    //-----------------------------------------------------------------------------
;;;749    void KT_WirelessMicRx_SW_Exciter(uint8_t cExciter_En)
000000  b570              PUSH     {r4-r6,lr}
;;;750    {
;;;751        uint8_t regx;
;;;752    
;;;753        regx=KT_Bus_Read(0x0269,chipSel);         
000002  4c09              LDR      r4,|L20.40|
000004  4d09              LDR      r5,|L20.44|
000006  4606              MOV      r6,r0                 ;750
000008  7861              LDRB     r1,[r4,#1]  ; chipSel
00000a  4628              MOV      r0,r5
00000c  f7fffffe          BL       KT_Bus_Read
;;;754        KT_Bus_Write(0x0269,(regx & 0x18) | (cExciter_En<<7) | (EXCITER_TUNE<<5) | 
000010  2118              MOVS     r1,#0x18
000012  4008              ANDS     r0,r0,r1
000014  01f1              LSLS     r1,r6,#7
000016  4308              ORRS     r0,r0,r1
000018  2140              MOVS     r1,#0x40
00001a  4308              ORRS     r0,r0,r1
00001c  b2c1              UXTB     r1,r0
00001e  7862              LDRB     r2,[r4,#1]  ; chipSel
000020  4628              MOV      r0,r5
000022  f7fffffe          BL       KT_Bus_Write
;;;755                     (EXCITER_DRIVE<<0),chipSel);
;;;756    }
000026  bd70              POP      {r4-r6,pc}
;;;757    
                          ENDP

                  |L20.40|
                          DCD      ||.data||
                  |L20.44|
                          DCD      0x00000269

                          AREA ||i.KT_WirelessMicRx_SelectMS||, CODE, READONLY, ALIGN=2

                  KT_WirelessMicRx_SelectMS PROC
;;;1248   //-----------------------------------------------------------------------------
;;;1249   void KT_WirelessMicRx_SelectMS(void)
000000  4901              LDR      r1,|L21.8|
;;;1250   {
;;;1251   	#ifdef DIVERSITY
;;;1252   	uint8_t fastRssiSlave,fastRssiMaster;
;;;1253   	fastRssiMaster=KT_Bus_Read(0x020a,chipSel);
;;;1254   	fastRssiSlave=KT_Bus_Read(0x0222,chipSel);
;;;1255   	if(fastRssiMaster>=fastRssiSlave)
;;;1256   	{
;;;1257   		MorSSelect=1;
;;;1258   	}
;;;1259   	else
;;;1260   	{
;;;1261   		MorSSelect=0;
;;;1262   	}
;;;1263   	#else
;;;1264   		MorSSelect=1;
000002  2001              MOVS     r0,#1
000004  7008              STRB     r0,[r1,#0]
;;;1265   	#endif
;;;1266   
;;;1267   }
000006  4770              BX       lr
;;;1268   
                          ENDP

                  |L21.8|
                          DCD      ||.data||

                          AREA ||i.KT_WirelessMicRx_SetEcho||, CODE, READONLY, ALIGN=2

                  KT_WirelessMicRx_SetEcho PROC
;;;726    //-----------------------------------------------------------------------------
;;;727    void KT_WirelessMicRx_SetEcho(uint8_t cEcho_Ratio, uint8_t cEcho_Delay)
000000  b5f8              PUSH     {r3-r7,lr}
;;;728    {
;;;729        uint8_t regx;
;;;730    
;;;731        regx=KT_Bus_Read(0x0267,chipSel);         
000002  4c0e              LDR      r4,|L22.60|
000004  4d0e              LDR      r5,|L22.64|
000006  460e              MOV      r6,r1                 ;728
000008  4607              MOV      r7,r0                 ;728
00000a  7861              LDRB     r1,[r4,#1]  ; chipSel
00000c  4628              MOV      r0,r5
00000e  f7fffffe          BL       KT_Bus_Read
;;;732        KT_Bus_Write(0x0267,(regx & 0xE0) | (cEcho_Ratio<<0),chipSel);
000012  0941              LSRS     r1,r0,#5
000014  0149              LSLS     r1,r1,#5
000016  4339              ORRS     r1,r1,r7
000018  7862              LDRB     r2,[r4,#1]  ; chipSel
00001a  4628              MOV      r0,r5
00001c  f7fffffe          BL       KT_Bus_Write
;;;733    
;;;734        regx=KT_Bus_Read(0x0268,chipSel);         
000020  1c6d              ADDS     r5,r5,#1
000022  7861              LDRB     r1,[r4,#1]  ; chipSel
000024  4628              MOV      r0,r5
000026  f7fffffe          BL       KT_Bus_Read
;;;735        KT_Bus_Write(0x0268,(regx & 0xE0) | (cEcho_Delay<<0),chipSel);
00002a  0941              LSRS     r1,r0,#5
00002c  0149              LSLS     r1,r1,#5
00002e  4331              ORRS     r1,r1,r6
000030  7862              LDRB     r2,[r4,#1]  ; chipSel
000032  4628              MOV      r0,r5
000034  f7fffffe          BL       KT_Bus_Write
;;;736    }
000038  bdf8              POP      {r3-r7,pc}
;;;737    
                          ENDP

00003a  0000              DCW      0x0000
                  |L22.60|
                          DCD      ||.data||
                  |L22.64|
                          DCD      0x00000267

                          AREA ||i.KT_WirelessMicRx_SetEqualizer||, CODE, READONLY, ALIGN=2

                  KT_WirelessMicRx_SetEqualizer PROC
;;;832    //-----------------------------------------------------------------------------
;;;833    void KT_WirelessMicRx_SetEqualizer(uint8_t cEqualizer_Frq, uint8_t cEqualizer_Gain)
000000  b570              PUSH     {r4-r6,lr}
;;;834    { 
;;;835        uint8_t regx_1 = 0;
;;;836        
;;;837        if(0 == cEqualizer_Frq)
;;;838        {
;;;839            regx_1 = KT_Bus_Read(0x0257 + cEqualizer_Frq,chipSel);
000002  4d0b              LDR      r5,|L23.48|
000004  460e              MOV      r6,r1                 ;834
000006  4c0b              LDR      r4,|L23.52|
000008  7869              LDRB     r1,[r5,#1]
00000a  2800              CMP      r0,#0                 ;837
00000c  d005              BEQ      |L23.26|
00000e  460a              MOV      r2,r1                 ;834
;;;840            regx_1 &= 0x20; 
;;;841            KT_Bus_Write(0x0257 + cEqualizer_Frq, cEqualizer_Gain | regx_1,chipSel);
;;;842        }
;;;843        else
;;;844        {
;;;845            KT_Bus_Write(0x0257 + cEqualizer_Frq, cEqualizer_Gain,chipSel);
000010  4631              MOV      r1,r6
000012  1900              ADDS     r0,r0,r4
                  |L23.20|
000014  f7fffffe          BL       KT_Bus_Write
;;;846        }
;;;847    }
000018  bd70              POP      {r4-r6,pc}
                  |L23.26|
00001a  4620              MOV      r0,r4                 ;839
00001c  f7fffffe          BL       KT_Bus_Read
000020  2120              MOVS     r1,#0x20              ;840
000022  4008              ANDS     r0,r0,r1              ;840
000024  4631              MOV      r1,r6                 ;840
000026  4301              ORRS     r1,r1,r0              ;841
000028  786a              LDRB     r2,[r5,#1]            ;841  ; chipSel
00002a  4620              MOV      r0,r4                 ;841
00002c  e7f2              B        |L23.20|
;;;848    
                          ENDP

00002e  0000              DCW      0x0000
                  |L23.48|
                          DCD      ||.data||
                  |L23.52|
                          DCD      0x00000257

                          AREA ||i.KT_WirelessMicRx_SetExciter||, CODE, READONLY, ALIGN=2

                  KT_WirelessMicRx_SetExciter PROC
;;;768    //-----------------------------------------------------------------------------
;;;769    void KT_WirelessMicRx_SetExciter(uint8_t cExciter_Odd, uint8_t cExciter_Even)
000000  b5f8              PUSH     {r3-r7,lr}
;;;770    {
;;;771        uint8_t regx;
;;;772    
;;;773        regx=KT_Bus_Read(0x026A,chipSel);         
000002  4c09              LDR      r4,|L24.40|
000004  4d09              LDR      r5,|L24.44|
000006  460e              MOV      r6,r1                 ;770
000008  4607              MOV      r7,r0                 ;770
00000a  7861              LDRB     r1,[r4,#1]  ; chipSel
00000c  4628              MOV      r0,r5
00000e  f7fffffe          BL       KT_Bus_Read
;;;774        KT_Bus_Write(0x026A,(regx & 0x88) | (cExciter_Odd<<4) | (cExciter_Even<<0),chipSel);
000012  2188              MOVS     r1,#0x88
000014  4008              ANDS     r0,r0,r1
000016  0139              LSLS     r1,r7,#4
000018  4308              ORRS     r0,r0,r1
00001a  4330              ORRS     r0,r0,r6
00001c  b2c1              UXTB     r1,r0
00001e  7862              LDRB     r2,[r4,#1]  ; chipSel
000020  4628              MOV      r0,r5
000022  f7fffffe          BL       KT_Bus_Write
;;;775    }
000026  bdf8              POP      {r3-r7,pc}
;;;776    
                          ENDP

                  |L24.40|
                          DCD      ||.data||
                  |L24.44|
                          DCD      0x0000026a

                          AREA ||i.KT_WirelessMicRx_SetMaxRfGain||, CODE, READONLY, ALIGN=2

                  KT_WirelessMicRx_SetMaxRfGain PROC
;;;1343   //-----------------------------------------------------------------------------
;;;1344   void  KT_WirelessMicRx_SetMaxRfGain(uint8_t sel)//输入范围0-3 对应36，40，44，48
000000  b570              PUSH     {r4-r6,lr}
;;;1345   {
000002  4604              MOV      r4,r0
;;;1346   	uint8_t regx;
;;;1347   	uint8_t rfGain;	
;;;1348   	for(chipSel=0;chipSel<chipNumb;chipSel++)
000004  2000              MOVS     r0,#0
000006  4d15              LDR      r5,|L25.92|
;;;1349   	{
;;;1350   		if(sel>3)
;;;1351   		sel=3;
;;;1352   		regx=KT_Bus_Read(0x0102,chipSel);
000008  26ff              MOVS     r6,#0xff
00000a  7068              STRB     r0,[r5,#1]            ;1348
00000c  3603              ADDS     r6,#3
                  |L25.14|
00000e  2c03              CMP      r4,#3                 ;1350
000010  d900              BLS      |L25.20|
000012  2403              MOVS     r4,#3                 ;1351
                  |L25.20|
000014  b2c1              UXTB     r1,r0
000016  4630              MOV      r0,r6
000018  f7fffffe          BL       KT_Bus_Read
;;;1353   		regx&=0xfc;
00001c  0881              LSRS     r1,r0,#2
00001e  0089              LSLS     r1,r1,#2
;;;1354   		regx|=sel;
000020  4321              ORRS     r1,r1,r4
;;;1355   		KT_Bus_Write(0x0102,regx,chipSel);
000022  786a              LDRB     r2,[r5,#1]  ; chipSel
000024  4630              MOV      r0,r6
000026  f7fffffe          BL       KT_Bus_Write
;;;1356   		regx=KT_Bus_Read(0x005b,chipSel);
00002a  7869              LDRB     r1,[r5,#1]  ; chipSel
00002c  205b              MOVS     r0,#0x5b
00002e  f7fffffe          BL       KT_Bus_Read
;;;1357   		rfGain=regx&0x7f;
000032  0642              LSLS     r2,r0,#25
;;;1358   		if(rfGain>((sel<<2)+42))
000034  00a1              LSLS     r1,r4,#2
000036  0e52              LSRS     r2,r2,#25             ;1357
000038  312a              ADDS     r1,r1,#0x2a
00003a  4291              CMP      r1,r2
00003c  d207              BCS      |L25.78|
;;;1359   		{
;;;1360   			rfGain=(sel<<2)+42;
00003e  b2ca              UXTB     r2,r1
;;;1361   			KT_Bus_Write(0x005b,(regx&0x80)|rfGain,chipSel);
000040  09c1              LSRS     r1,r0,#7
000042  01c9              LSLS     r1,r1,#7
000044  4311              ORRS     r1,r1,r2
000046  786a              LDRB     r2,[r5,#1]  ; chipSel
000048  205b              MOVS     r0,#0x5b
00004a  f7fffffe          BL       KT_Bus_Write
                  |L25.78|
00004e  7868              LDRB     r0,[r5,#1]            ;1348  ; chipSel
000050  1c40              ADDS     r0,r0,#1              ;1348
000052  b2c0              UXTB     r0,r0                 ;1348
000054  7068              STRB     r0,[r5,#1]            ;1348
000056  2802              CMP      r0,#2                 ;1348
000058  d3d9              BCC      |L25.14|
;;;1362   		}		
;;;1363   	}
;;;1364   }
00005a  bd70              POP      {r4-r6,pc}
;;;1365   
                          ENDP

                  |L25.92|
                          DCD      ||.data||

                          AREA ||i.KT_WirelessMicRx_Tune||, CODE, READONLY, ALIGN=2

                  KT_WirelessMicRx_Tune PROC
;;;513    //-----------------------------------------------------------------------------
;;;514    void KT_WirelessMicRx_Tune(long Freq)
000000  b570              PUSH     {r4-r6,lr}
;;;515    {
;;;516        uint16_t Freq_H,Freq_M,Freq_L,regx;
;;;517    	uint8_t LO_LOCK_DET_PD_SAVE;
;;;518    	uint8_t state;
;;;519        
;;;520    //	regx = KT_Bus_Read(0x0133,chipSel);
;;;521    //	KT_Bus_Write(0x0133,(regx&~0x60),chipSel); //dll_rst_en=0  I_PLL_UNLOCK_EN=0  
;;;522    //	regx=KT_Bus_Read(0x0054,chipSel);
;;;523    //	KT_Bus_Write(0x0054,regx&~0x18,chipSel);//PLL失锁中断 dis
;;;524    
;;;525    #ifdef XTAL_DUAL
;;;526    	#ifdef NEW_SEL_XTAL_MODE
;;;527        	caclXtal(Freq);//select xtal
;;;528    	#else
;;;529    		oldCaclXtal(Freq);
;;;530    	#endif
;;;531    #endif
;;;532        
;;;533    	regx=KT_Bus_Read(0x0108,chipSel);
000002  4c5f              LDR      r4,|L26.384|
000004  26ff              MOVS     r6,#0xff
000006  4605              MOV      r5,r0                 ;515
000008  3609              ADDS     r6,r6,#9
00000a  7861              LDRB     r1,[r4,#1]  ; chipSel
00000c  4630              MOV      r0,r6
00000e  f7fffffe          BL       KT_Bus_Read
;;;534        KT_Bus_Write(0x0108,regx & ~KT_BIT3,chipSel); //SCAN_MODE=0;
000012  21f7              MOVS     r1,#0xf7
000014  4001              ANDS     r1,r1,r0
000016  7862              LDRB     r2,[r4,#1]  ; chipSel
000018  4630              MOV      r0,r6
00001a  f7fffffe          BL       KT_Bus_Write
;;;535    //	printf("Freq, = %ld,\n",Freq);
;;;536    	Freq = Freq & 0x000FFFFF;
00001e  0328              LSLS     r0,r5,#12
000020  0b00              LSRS     r0,r0,#12
;;;537    
;;;538        Freq_H = ( Freq >> 12 );
000022  0101              LSLS     r1,r0,#4
;;;539        Freq_M = ( (Freq & 0x00000FFF) >> 4 );
;;;540        Freq_L = ( (Freq & 0x0000000F) << 4 );
;;;541    //	printf("Freq, Freq_H, Freq_M, Freq_L = %lx, %x, %x, %x \n",Freq,Freq_H, Freq_M, Freq_L);
;;;542        KT_Bus_Write(0x0045,Freq_H,chipSel);                
;;;543        KT_Bus_Write(0x0046,Freq_M,chipSel);
;;;544    
;;;545        regx=KT_Bus_Read(0x0047,chipSel);
;;;546        KT_Bus_Write(0x0047,(regx & 0x0F) | Freq_L ,chipSel);
;;;547    
;;;548    	if(KT_Bus_Read(0x010f,chipSel)==0x10)//a
;;;549    	{
;;;550    		regx=KT_Bus_Read(0x0053,chipSel);
;;;551    		KT_Bus_Write(0x0053,regx&~0x40,chipSel);  //rfamp_int_en=0
;;;552    	}
;;;553    
;;;554        regx=KT_Bus_Read(0x0047,chipSel);
;;;555        KT_Bus_Write(0x0047,regx | KT_BIT0,chipSel); //chan_valid=1;
;;;556    
;;;557    	//因为chan_valid=1以后，触发tune中断PLL done先写为0，完成后写1，如果不delay 1ms,可能PLL done读出为1的时候
;;;558    	//内部cpu程序还没有把PLL done写成0，所以外部mcu和内部cpu可能会同时操作一些内部DSP等，导致死机，所以需要delay
;;;559    	//TIMER_Delay(TIMER0, 500); //delay 1ms
;;;560        //regx=KT_Bus_Read(0x0012,chipSel);
;;;561    	//printf("regx, = %x,\n",regx);
;;;562        while (!(KT_Bus_Read(0x0061,chipSel) & 0x01)); //PLL done
;;;563    
;;;564    	if(KT_Bus_Read(0x010f,chipSel)==0x10)//a
;;;565    	{
;;;566    		regx=KT_Bus_Read(0x0042,chipSel);
;;;567    		KT_Bus_Write(0x0042,regx | KT_BIT2,chipSel);//S_DSP_RST
;;;568    
;;;569    		regx=KT_Bus_Read(0x0042,chipSel);
;;;570    		KT_Bus_Write(0x0042,regx | KT_BIT4,chipSel);//S_PLL_SDM_RST			
;;;571    
;;;572    		regx=KT_Bus_Read(0x0030,chipSel);
;;;573    		LO_LOCK_DET_PD_SAVE = regx&0x80;
;;;574    		KT_Bus_Write(0x0030,regx | KT_BIT7,chipSel);//LO_LOCK_DET_PD=1
;;;575    	   
;;;576    		regx=KT_Bus_Read(0x0017,chipSel); //double+16MHz/V locoarse_var_sel
;;;577    		state=regx&0x07;
;;;578    		if(state >= 3)
;;;579    		{
;;;580    			state = 7;                                
;;;581    		}
;;;582    		else
;;;583    		{
;;;584    			state = (state<<1) + 3;
;;;585    		}
;;;586    		regx=(regx&0xf8)|state;                                          
;;;587    		KT_Bus_Write(0x0017, regx,chipSel); //write locoarse/lofine_var_sel
;;;588    
;;;589    		Pll_Band_Cali(0, 255);
;;;590    
;;;591    		PLL_Reset();
;;;592    
;;;593    		regx=KT_Bus_Read(0x0042,chipSel);
;;;594    		KT_Bus_Write(0x0042,regx & ~KT_BIT4,chipSel);//C_PLL_SDM_RST
;;;595    
;;;596    		regx=KT_Bus_Read(0x0042,chipSel);
;;;597    		KT_Bus_Write(0x0042,regx & ~KT_BIT2,chipSel);//C_DSP_RST
;;;598    
;;;599    		TIMER_Delay(TIMER0, 10000);	//delay 10ms
;;;600    
;;;601    		regx=KT_Bus_Read(0x0030,chipSel);
;;;602    		KT_Bus_Write(0x0030,(regx & ~KT_BIT7)|LO_LOCK_DET_PD_SAVE,chipSel);//LO_LOCK_DET_PD recovery
;;;603    
;;;604    	//	regx = KT_Bus_Read(0x0133,chipSel);          
;;;605    	//    KT_Bus_Write(0x0133,(regx|0x60),chipSel); // dll_rst_en=1 I_PLL_UNLOCK_EN=1  
;;;606    
;;;607    		if(KT_WirelessMicRx_GetSNR()>AUTOMUTE_SNR_LOWTH)
;;;608    		{
;;;609    			regx=KT_Bus_Read(0x0087,chipSel);			//SOFT_SNR_MUTE写为0
;;;610    			KT_Bus_Write(0x0087,regx&~0x02,chipSel);
;;;611    		}
;;;612    	}
;;;613    	#ifdef I2S_EN
;;;614    		if(chipSel<chipBM)
;;;615    		{
;;;616    			KT_WirelessMicRx_SAIInit(&chipAI2sConfig);
;;;617    		}
;;;618    		#ifdef TWOCHANNEL
;;;619    		else
;;;620    		{
;;;621    			KT_WirelessMicRx_SAIInit(&chipBI2sConfig);
;;;622    		}
;;;623    		#endif
;;;624    	#endif
;;;625    }
000024  052a              LSLS     r2,r5,#20
000026  0700              LSLS     r0,r0,#28             ;540
000028  0e15              LSRS     r5,r2,#24             ;539
00002a  0e06              LSRS     r6,r0,#24             ;540
00002c  0c09              LSRS     r1,r1,#16             ;538
00002e  7862              LDRB     r2,[r4,#1]            ;542  ; chipSel
000030  2045              MOVS     r0,#0x45              ;542
000032  f7fffffe          BL       KT_Bus_Write
000036  7862              LDRB     r2,[r4,#1]            ;543  ; chipSel
000038  4629              MOV      r1,r5                 ;543
00003a  2046              MOVS     r0,#0x46              ;543
00003c  f7fffffe          BL       KT_Bus_Write
000040  7861              LDRB     r1,[r4,#1]            ;545  ; chipSel
000042  2047              MOVS     r0,#0x47              ;545
000044  f7fffffe          BL       KT_Bus_Read
000048  0701              LSLS     r1,r0,#28             ;546
00004a  0f09              LSRS     r1,r1,#28             ;546
00004c  4331              ORRS     r1,r1,r6              ;546
00004e  7862              LDRB     r2,[r4,#1]            ;546  ; chipSel
000050  2047              MOVS     r0,#0x47              ;546
000052  f7fffffe          BL       KT_Bus_Write
000056  25ff              MOVS     r5,#0xff              ;548
000058  3510              ADDS     r5,r5,#0x10           ;548
00005a  7861              LDRB     r1,[r4,#1]            ;548  ; chipSel
00005c  4628              MOV      r0,r5                 ;548
00005e  f7fffffe          BL       KT_Bus_Read
000062  2810              CMP      r0,#0x10              ;548
000064  d109              BNE      |L26.122|
000066  7861              LDRB     r1,[r4,#1]            ;550  ; chipSel
000068  2053              MOVS     r0,#0x53              ;550
00006a  f7fffffe          BL       KT_Bus_Read
00006e  21bf              MOVS     r1,#0xbf              ;551
000070  4001              ANDS     r1,r1,r0              ;551
000072  7862              LDRB     r2,[r4,#1]            ;551  ; chipSel
000074  2053              MOVS     r0,#0x53              ;551
000076  f7fffffe          BL       KT_Bus_Write
                  |L26.122|
00007a  7861              LDRB     r1,[r4,#1]            ;554  ; chipSel
00007c  2047              MOVS     r0,#0x47              ;554
00007e  f7fffffe          BL       KT_Bus_Read
000082  2101              MOVS     r1,#1                 ;555
000084  4301              ORRS     r1,r1,r0              ;555
000086  7862              LDRB     r2,[r4,#1]            ;555  ; chipSel
000088  2047              MOVS     r0,#0x47              ;555
00008a  f7fffffe          BL       KT_Bus_Write
                  |L26.142|
00008e  7861              LDRB     r1,[r4,#1]            ;562  ; chipSel
000090  2061              MOVS     r0,#0x61              ;562
000092  f7fffffe          BL       KT_Bus_Read
000096  07c0              LSLS     r0,r0,#31             ;562
000098  d0f9              BEQ      |L26.142|
00009a  7861              LDRB     r1,[r4,#1]            ;564  ; chipSel
00009c  4628              MOV      r0,r5                 ;564
00009e  f7fffffe          BL       KT_Bus_Read
0000a2  2810              CMP      r0,#0x10              ;564
0000a4  d16b              BNE      |L26.382|
0000a6  7861              LDRB     r1,[r4,#1]            ;566  ; chipSel
0000a8  2042              MOVS     r0,#0x42              ;566
0000aa  f7fffffe          BL       KT_Bus_Read
0000ae  2104              MOVS     r1,#4                 ;567
0000b0  4301              ORRS     r1,r1,r0              ;567
0000b2  7862              LDRB     r2,[r4,#1]            ;567  ; chipSel
0000b4  2042              MOVS     r0,#0x42              ;567
0000b6  f7fffffe          BL       KT_Bus_Write
0000ba  7861              LDRB     r1,[r4,#1]            ;569  ; chipSel
0000bc  2042              MOVS     r0,#0x42              ;569
0000be  f7fffffe          BL       KT_Bus_Read
0000c2  2110              MOVS     r1,#0x10              ;570
0000c4  4301              ORRS     r1,r1,r0              ;570
0000c6  7862              LDRB     r2,[r4,#1]            ;570  ; chipSel
0000c8  2042              MOVS     r0,#0x42              ;570
0000ca  f7fffffe          BL       KT_Bus_Write
0000ce  7861              LDRB     r1,[r4,#1]            ;572  ; chipSel
0000d0  2030              MOVS     r0,#0x30              ;572
0000d2  f7fffffe          BL       KT_Bus_Read
0000d6  2680              MOVS     r6,#0x80              ;573
0000d8  4605              MOV      r5,r0                 ;573
0000da  4330              ORRS     r0,r0,r6              ;574
0000dc  4601              MOV      r1,r0                 ;574
0000de  4035              ANDS     r5,r5,r6              ;573
0000e0  7862              LDRB     r2,[r4,#1]            ;574  ; chipSel
0000e2  2030              MOVS     r0,#0x30              ;574
0000e4  f7fffffe          BL       KT_Bus_Write
0000e8  7861              LDRB     r1,[r4,#1]            ;576  ; chipSel
0000ea  2017              MOVS     r0,#0x17              ;576
0000ec  f7fffffe          BL       KT_Bus_Read
0000f0  0741              LSLS     r1,r0,#29             ;577
0000f2  0f49              LSRS     r1,r1,#29             ;577
0000f4  2903              CMP      r1,#3                 ;578
0000f6  d301              BCC      |L26.252|
0000f8  2207              MOVS     r2,#7                 ;580
0000fa  e001              B        |L26.256|
                  |L26.252|
0000fc  004a              LSLS     r2,r1,#1              ;584
0000fe  1cd2              ADDS     r2,r2,#3              ;584
                  |L26.256|
000100  21f8              MOVS     r1,#0xf8              ;586
000102  4008              ANDS     r0,r0,r1              ;586
000104  4310              ORRS     r0,r0,r2              ;586
000106  4601              MOV      r1,r0                 ;587
000108  7862              LDRB     r2,[r4,#1]            ;587  ; chipSel
00010a  2017              MOVS     r0,#0x17              ;587
00010c  f7fffffe          BL       KT_Bus_Write
000110  21ff              MOVS     r1,#0xff              ;589
000112  2000              MOVS     r0,#0                 ;589
000114  f7fffffe          BL       Pll_Band_Cali
000118  f7fffffe          BL       PLL_Reset
00011c  7861              LDRB     r1,[r4,#1]            ;593  ; chipSel
00011e  2042              MOVS     r0,#0x42              ;593
000120  f7fffffe          BL       KT_Bus_Read
000124  21ef              MOVS     r1,#0xef              ;594
000126  4001              ANDS     r1,r1,r0              ;594
000128  7862              LDRB     r2,[r4,#1]            ;594  ; chipSel
00012a  2042              MOVS     r0,#0x42              ;594
00012c  f7fffffe          BL       KT_Bus_Write
000130  7861              LDRB     r1,[r4,#1]            ;596  ; chipSel
000132  2042              MOVS     r0,#0x42              ;596
000134  f7fffffe          BL       KT_Bus_Read
000138  21fb              MOVS     r1,#0xfb              ;597
00013a  4001              ANDS     r1,r1,r0              ;597
00013c  7862              LDRB     r2,[r4,#1]            ;597  ; chipSel
00013e  2042              MOVS     r0,#0x42              ;597
000140  f7fffffe          BL       KT_Bus_Write
000144  490f              LDR      r1,|L26.388|
000146  4810              LDR      r0,|L26.392|
000148  f7fffffe          BL       TIMER_Delay
00014c  7861              LDRB     r1,[r4,#1]            ;601  ; chipSel
00014e  2030              MOVS     r0,#0x30              ;601
000150  f7fffffe          BL       KT_Bus_Read
000154  43b0              BICS     r0,r0,r6              ;602
000156  4328              ORRS     r0,r0,r5              ;602
000158  4601              MOV      r1,r0                 ;602
00015a  7862              LDRB     r2,[r4,#1]            ;602  ; chipSel
00015c  2030              MOVS     r0,#0x30              ;602
00015e  f7fffffe          BL       KT_Bus_Write
000162  f7fffffe          BL       KT_WirelessMicRx_GetSNR
000166  2878              CMP      r0,#0x78              ;607
000168  d909              BLS      |L26.382|
00016a  7861              LDRB     r1,[r4,#1]            ;609  ; chipSel
00016c  2087              MOVS     r0,#0x87              ;609
00016e  f7fffffe          BL       KT_Bus_Read
000172  21fd              MOVS     r1,#0xfd              ;610
000174  4001              ANDS     r1,r1,r0              ;610
000176  7862              LDRB     r2,[r4,#1]            ;610  ; chipSel
000178  2087              MOVS     r0,#0x87              ;610
00017a  f7fffffe          BL       KT_Bus_Write
                  |L26.382|
00017e  bd70              POP      {r4-r6,pc}
;;;626    
                          ENDP

                  |L26.384|
                          DCD      ||.data||
                  |L26.388|
                          DCD      0x00002710
                  |L26.392|
                          DCD      0x40010000

                          AREA ||i.KT_WirelessMicRx_Volume||, CODE, READONLY, ALIGN=2

                  KT_WirelessMicRx_Volume PROC
;;;200    //-----------------------------------------------------------------------------
;;;201    bool KT_WirelessMicRx_Volume(uint8_t cVolume)
000000  b570              PUSH     {r4-r6,lr}
;;;202    {
;;;203        uint8_t regx;
;;;204    
;;;205        regx = KT_Bus_Read(0x0201,chipSel);
000002  4c08              LDR      r4,|L27.36|
000004  4d08              LDR      r5,|L27.40|
000006  4606              MOV      r6,r0                 ;202
000008  7861              LDRB     r1,[r4,#1]  ; chipSel
00000a  4628              MOV      r0,r5
00000c  f7fffffe          BL       KT_Bus_Read
;;;206        KT_Bus_Write(0x0201, (regx & 0xE0) | (cVolume),chipSel);
000010  0941              LSRS     r1,r0,#5
000012  0149              LSLS     r1,r1,#5
000014  4331              ORRS     r1,r1,r6
000016  7862              LDRB     r2,[r4,#1]  ; chipSel
000018  4628              MOV      r0,r5
00001a  f7fffffe          BL       KT_Bus_Write
;;;207    
;;;208        return(1);
00001e  2001              MOVS     r0,#1
;;;209    }
000020  bd70              POP      {r4-r6,pc}
;;;210    
                          ENDP

000022  0000              DCW      0x0000
                  |L27.36|
                          DCD      ||.data||
                  |L27.40|
                          DCD      0x00000201

                          AREA ||i.KT_WirelessMicRx_Volume_set||, CODE, READONLY, ALIGN=2

                          REQUIRE _printf_percent
                          REQUIRE _printf_x
                          REQUIRE _printf_longlong_hex
                  KT_WirelessMicRx_Volume_set PROC
;;;210    
;;;211    void KT_WirelessMicRx_Volume_set(uint8_t cVolume, uint8_t chipnum)
000000  b570              PUSH     {r4-r6,lr}
;;;212    {
000002  460e              MOV      r6,r1
;;;213        uint8_t regx;
;;;214    	printf("cVolume %x, chipnum %x\n",cVolume,chipnum);
000004  460a              MOV      r2,r1
000006  4605              MOV      r5,r0                 ;212
000008  4601              MOV      r1,r0
00000a  a008              ADR      r0,|L28.44|
00000c  f7fffffe          BL       __2printf
;;;215        regx = KT_Bus_Read(0x0201,chipnum);
000010  4c0c              LDR      r4,|L28.68|
000012  4631              MOV      r1,r6
000014  4620              MOV      r0,r4
000016  f7fffffe          BL       KT_Bus_Read
;;;216        KT_Bus_Write(0x0201, (regx & 0xE0) | (cVolume),chipnum);
00001a  0941              LSRS     r1,r0,#5
00001c  0149              LSLS     r1,r1,#5
00001e  4329              ORRS     r1,r1,r5
000020  4632              MOV      r2,r6
000022  4620              MOV      r0,r4
000024  f7fffffe          BL       KT_Bus_Write
;;;217    
;;;218    }
000028  bd70              POP      {r4-r6,pc}
;;;219    
                          ENDP

00002a  0000              DCW      0x0000
                  |L28.44|
00002c  63566f6c          DCB      "cVolume %x, chipnum %x\n",0
000030  756d6520
000034  25782c20
000038  63686970
00003c  6e756d20
000040  25780a00
                  |L28.68|
                          DCD      0x00000201

                          AREA ||i.KT_WirelessMicRx_chipPowerOn||, CODE, READONLY, ALIGN=2

                  KT_WirelessMicRx_chipPowerOn PROC
;;;1981   
;;;1982   void KT_WirelessMicRx_chipPowerOn(void)
000000  b570              PUSH     {r4-r6,lr}
;;;1983   {
;;;1984   	GPIO_SetMode(PB, BIT10, GPIO_MODE_OUTPUT);
000002  2201              MOVS     r2,#1
000004  0291              LSLS     r1,r2,#10
000006  481c              LDR      r0,|L29.120|
000008  f7fffffe          BL       GPIO_SetMode
;;;1985   	PB10 = 0;
00000c  4c1b              LDR      r4,|L29.124|
00000e  2500              MOVS     r5,#0
000010  62a5              STR      r5,[r4,#0x28]
;;;1986   	TIMER_Delay(TIMER0, 5000); //delay 1ms
000012  4e1c              LDR      r6,|L29.132|
000014  491a              LDR      r1,|L29.128|
000016  4630              MOV      r0,r6
000018  f7fffffe          BL       TIMER_Delay
;;;1987   	PB10 = 1;
00001c  2001              MOVS     r0,#1
00001e  62a0              STR      r0,[r4,#0x28]
;;;1988       TIMER_Delay(TIMER0, 15000);	//delay 15ms
000020  4919              LDR      r1,|L29.136|
000022  4630              MOV      r0,r6
000024  f7fffffe          BL       TIMER_Delay
;;;1989       
;;;1990   	for(chipSel=0;chipSel<chipNumb;chipSel++)
000028  4c18              LDR      r4,|L29.140|
00002a  7065              STRB     r5,[r4,#1]
                  |L29.44|
;;;1991       {
;;;1992           while(!KT_WirelessMicRx_PreInit()); //打开debug选项，使其从外部eeprom load程序
00002c  f7fffffe          BL       KT_WirelessMicRx_PreInit
000030  2800              CMP      r0,#0
000032  d0fb              BEQ      |L29.44|
000034  7860              LDRB     r0,[r4,#1]            ;1990  ; chipSel
000036  1c40              ADDS     r0,r0,#1              ;1990
000038  b2c1              UXTB     r1,r0                 ;1990
00003a  7061              STRB     r1,[r4,#1]            ;1990
00003c  2902              CMP      r1,#2                 ;1990
00003e  d3f5              BCC      |L29.44|
;;;1993       }
;;;1994       TIMER_Delay(TIMER0, 200000);	//delay 200ms
000040  4913              LDR      r1,|L29.144|
000042  4630              MOV      r0,r6
000044  f7fffffe          BL       TIMER_Delay
;;;1995   	//loadChannelInfo();
;;;1996       for(chipSel=0;chipSel<chipNumb;chipSel++)
000048  7065              STRB     r5,[r4,#1]
;;;1997       {
;;;1998   //        KT_MicRX_Init(); //芯片初始化
;;;1999   	#ifdef TWOCHANNEL
;;;2000           if(chipSel>=chipBM)	//B 通道时
;;;2001           {
;;;2002           	KT_MicARX_Init();
;;;2003               KT_WirelessMicRx_SW_Diversity(soundB.diversityFlag);
00004a  4d10              LDR      r5,|L29.140|
00004c  3520              ADDS     r5,r5,#0x20
;;;2004           }
;;;2005           else
;;;2006   	#endif
;;;2007           {
;;;2008           	KT_MicBRX_Init();
;;;2009               KT_WirelessMicRx_SW_Diversity(soundA.diversityFlag);
00004e  462e              MOV      r6,r5
000050  3e1c              SUBS     r6,r6,#0x1c
000052  e005              B        |L29.96|
                  |L29.84|
000054  2800              CMP      r0,#0                 ;2000
000056  d003              BEQ      |L29.96|
000058  f7fffffe          BL       KT_MicARX_Init
00005c  79e8              LDRB     r0,[r5,#7]            ;2003  ; soundB
00005e  e002              B        |L29.102|
                  |L29.96|
000060  f7fffffe          BL       KT_MicBRX_Init
000064  79f0              LDRB     r0,[r6,#7]  ; soundA
                  |L29.102|
000066  f7fffffe          BL       KT_WirelessMicRx_SW_Diversity
00006a  7860              LDRB     r0,[r4,#1]            ;1996  ; chipSel
00006c  1c40              ADDS     r0,r0,#1              ;1996
00006e  b2c0              UXTB     r0,r0                 ;1996
000070  7060              STRB     r0,[r4,#1]            ;1996
000072  2802              CMP      r0,#2                 ;1996
000074  d3ee              BCC      |L29.84|
;;;2010           }
;;;2011       }
;;;2012   }
000076  bd70              POP      {r4-r6,pc}
;;;2013   
                          ENDP

                  |L29.120|
                          DCD      0x50004040
                  |L29.124|
                          DCD      0x50004240
                  |L29.128|
                          DCD      0x00001388
                  |L29.132|
                          DCD      0x40010000
                  |L29.136|
                          DCD      0x00003a98
                  |L29.140|
                          DCD      ||.data||
                  |L29.144|
                          DCD      0x00030d40

                          AREA ||i.PLL_Reset||, CODE, READONLY, ALIGN=2

                  PLL_Reset PROC
;;;1195   //-----------------------------------------------------------------------------
;;;1196   static void PLL_Reset(void)
000000  b5f8              PUSH     {r3-r7,lr}
;;;1197   {
;;;1198       uint8_t Tmp;
;;;1199       uint8_t VrefSel;
;;;1200   	uint8_t regx,regy;
;;;1201       
;;;1202       if(KT_BIT3&KT_Bus_Read(0x00133,chipSel))	  //I_PLL_RESET_EN
000002  4c29              LDR      r4,|L30.168|
000004  27ff              MOVS     r7,#0xff
000006  3734              ADDS     r7,r7,#0x34
000008  7861              LDRB     r1,[r4,#1]  ; chipSel
00000a  4638              MOV      r0,r7
00000c  f7fffffe          BL       KT_Bus_Read
000010  0700              LSLS     r0,r0,#28
000012  d548              BPL      |L30.166|
;;;1203       {
;;;1204           regx=KT_Bus_Read(0x0016,chipSel);  //Tmp = I_LO_KVCO_CALI_EN;
000014  7861              LDRB     r1,[r4,#1]  ; chipSel
000016  2016              MOVS     r0,#0x16
000018  f7fffffe          BL       KT_Bus_Read
;;;1205   		Tmp = (regx>>6)&KT_BIT0;
00001c  0640              LSLS     r0,r0,#25
00001e  0fc6              LSRS     r6,r0,#31
;;;1206   
;;;1207           VrefSel = 0x07&KT_Bus_Read(0x0016,chipSel);//I_LO_KVCO_COARSE_VREF_SEL;
000020  7861              LDRB     r1,[r4,#1]  ; chipSel
000022  2016              MOVS     r0,#0x16
000024  f7fffffe          BL       KT_Bus_Read
000028  0745              LSLS     r5,r0,#29
00002a  0f6d              LSRS     r5,r5,#29
;;;1208   
;;;1209   		regy=KT_Bus_Read(0x0133,chipSel);
00002c  7861              LDRB     r1,[r4,#1]  ; chipSel
00002e  4638              MOV      r0,r7
000030  f7fffffe          BL       KT_Bus_Read
;;;1210   		regy&=0x07;
000034  0747              LSLS     r7,r0,#29
000036  0f7f              LSRS     r7,r7,#29
;;;1211   
;;;1212   		regx=KT_Bus_Read(0x0018,chipSel);
000038  7861              LDRB     r1,[r4,#1]  ; chipSel
00003a  2018              MOVS     r0,#0x18
00003c  f7fffffe          BL       KT_Bus_Read
;;;1213   		regx&=~0x07;
000040  08c1              LSRS     r1,r0,#3
000042  00c9              LSLS     r1,r1,#3
;;;1214   		regx|=regy;
000044  4339              ORRS     r1,r1,r7
;;;1215   		KT_Bus_Write(0x0018, regx ,chipSel);  //O_LO_KVCO_COARSE_VREF_SEL(I_LO_KVCO_COARSE_VREF_SEL_RST);
000046  7862              LDRB     r2,[r4,#1]  ; chipSel
000048  2018              MOVS     r0,#0x18
00004a  f7fffffe          BL       KT_Bus_Write
;;;1216   		
;;;1217   		regx=KT_Bus_Read(0x0016,chipSel);
00004e  7861              LDRB     r1,[r4,#1]  ; chipSel
000050  2016              MOVS     r0,#0x16
000052  f7fffffe          BL       KT_Bus_Read
;;;1218   		KT_Bus_Write(0x0016, regx|KT_BIT6 ,chipSel); 	//S_LO_KVCO_CALI_EN;      
000056  2740              MOVS     r7,#0x40
000058  4338              ORRS     r0,r0,r7
00005a  4601              MOV      r1,r0
00005c  7862              LDRB     r2,[r4,#1]  ; chipSel
00005e  2016              MOVS     r0,#0x16
000060  f7fffffe          BL       KT_Bus_Write
;;;1219           
;;;1220   		TIMER_Delay(TIMER0, 10000);	//delay 10ms
000064  4911              LDR      r1,|L30.172|
000066  4812              LDR      r0,|L30.176|
000068  f7fffffe          BL       TIMER_Delay
;;;1221   
;;;1222           if(Tmp)
;;;1223           {
;;;1224               regx=KT_Bus_Read(0x0016,chipSel);
;;;1225   			KT_Bus_Write(0x0016, regx|KT_BIT6 ,chipSel); 	//S_LO_KVCO_CALI_EN; 
;;;1226           }
;;;1227           else
;;;1228           {
;;;1229               regx=KT_Bus_Read(0x0016,chipSel);
00006c  7861              LDRB     r1,[r4,#1]  ; chipSel
00006e  2e00              CMP      r6,#0                 ;1222
000070  d004              BEQ      |L30.124|
000072  2016              MOVS     r0,#0x16              ;1224
000074  f7fffffe          BL       KT_Bus_Read
000078  4338              ORRS     r0,r0,r7              ;1225
00007a  e004              B        |L30.134|
                  |L30.124|
00007c  2016              MOVS     r0,#0x16
00007e  f7fffffe          BL       KT_Bus_Read
;;;1230   			KT_Bus_Write(0x0016, regx&~KT_BIT6 ,chipSel); 	//C_LO_KVCO_CALI_EN; 
000082  21bf              MOVS     r1,#0xbf
000084  4008              ANDS     r0,r0,r1
                  |L30.134|
000086  4601              MOV      r1,r0
000088  7862              LDRB     r2,[r4,#1]  ; chipSel
00008a  2016              MOVS     r0,#0x16
00008c  f7fffffe          BL       KT_Bus_Write
;;;1231           }
;;;1232   
;;;1233   		regx=KT_Bus_Read(0x0018,chipSel);
000090  7861              LDRB     r1,[r4,#1]  ; chipSel
000092  2018              MOVS     r0,#0x18
000094  f7fffffe          BL       KT_Bus_Read
;;;1234   		KT_Bus_Write(0x0018, (regx&0xf8)|VrefSel ,chipSel);  //O_LO_KVCO_COARSE_VREF_SEL(VrefSel);        
000098  08c1              LSRS     r1,r0,#3
00009a  00c9              LSLS     r1,r1,#3
00009c  4329              ORRS     r1,r1,r5
00009e  7862              LDRB     r2,[r4,#1]  ; chipSel
0000a0  2018              MOVS     r0,#0x18
0000a2  f7fffffe          BL       KT_Bus_Write
                  |L30.166|
;;;1235       }
;;;1236   }
0000a6  bdf8              POP      {r3-r7,pc}
;;;1237   
                          ENDP

                  |L30.168|
                          DCD      ||.data||
                  |L30.172|
                          DCD      0x00002710
                  |L30.176|
                          DCD      0x40010000

                          AREA ||i.Pll_Band_Cali||, CODE, READONLY, ALIGN=2

                  Pll_Band_Cali PROC
;;;1060   //-----------------------------------------------------------------------------
;;;1061   static void Pll_Band_Cali(uint8_t CLl, uint8_t CLh)
000000  b5f3              PUSH     {r0,r1,r4-r7,lr}
;;;1062   {
;;;1063       int32_t Tmp[2],I_VCOCNT_RES_2,I_VCOFREQ_REF;
;;;1064   	uint8_t regx,loVcoBandSelRead;
;;;1065   
;;;1066   	regx=KT_Bus_Read(0x005c,chipSel);
000002  4c94              LDR      r4,|L31.596|
000004  4605              MOV      r5,r0                 ;1062
000006  b081              SUB      sp,sp,#4              ;1062
000008  7861              LDRB     r1,[r4,#1]  ; chipSel
00000a  205c              MOVS     r0,#0x5c
00000c  f7fffffe          BL       KT_Bus_Read
;;;1067       if(!(regx&KT_BIT6))
000010  0640              LSLS     r0,r0,#25
000012  d57d              BPL      |L31.272|
;;;1068       {
;;;1069           return;
;;;1070       }
;;;1071       regx=KT_Bus_Read(0x0061,chipSel);
000014  7861              LDRB     r1,[r4,#1]  ; chipSel
000016  2061              MOVS     r0,#0x61
000018  f7fffffe          BL       KT_Bus_Read
;;;1072   	regx&=0xc7;
00001c  21c7              MOVS     r1,#0xc7
00001e  4008              ANDS     r0,r0,r1
;;;1073   	regx|=0x28;					//O_VCOCNT_WIN(5);
000020  2128              MOVS     r1,#0x28
000022  4301              ORRS     r1,r1,r0
;;;1074       KT_Bus_Write(0x0061, regx ,chipSel);
000024  7862              LDRB     r2,[r4,#1]  ; chipSel
000026  2061              MOVS     r0,#0x61
000028  f7fffffe          BL       KT_Bus_Write
;;;1075   
;;;1076   	regx=KT_Bus_Read(0x001c,chipSel); //S_LO_VCO_BAND_CALI_EN;
00002c  7861              LDRB     r1,[r4,#1]  ; chipSel
00002e  201c              MOVS     r0,#0x1c
000030  f7fffffe          BL       KT_Bus_Read
;;;1077       KT_Bus_Write(0x001c, regx|KT_BIT6 ,chipSel);
000034  2740              MOVS     r7,#0x40
000036  4338              ORRS     r0,r0,r7
000038  4601              MOV      r1,r0
00003a  7862              LDRB     r2,[r4,#1]  ; chipSel
00003c  201c              MOVS     r0,#0x1c
00003e  f7fffffe          BL       KT_Bus_Write
;;;1078   
;;;1079   	regx=KT_Bus_Read(0x001a,chipSel);
000042  7861              LDRB     r1,[r4,#1]  ; chipSel
000044  201a              MOVS     r0,#0x1a
000046  f7fffffe          BL       KT_Bus_Read
;;;1080   	regx&=0xc0;
00004a  0981              LSRS     r1,r0,#6
00004c  0189              LSLS     r1,r1,#6
;;;1081   	regx|=0x20;					//O_LO_MMD_MC(32);
00004e  2020              MOVS     r0,#0x20
000050  4301              ORRS     r1,r1,r0
;;;1082       KT_Bus_Write(0x001a, regx ,chipSel);
000052  7862              LDRB     r2,[r4,#1]  ; chipSel
000054  201a              MOVS     r0,#0x1a
000056  f7fffffe          BL       KT_Bus_Write
;;;1083   
;;;1084   	regx=KT_Bus_Read(0x0061,chipSel); //S_LOMC_SEL;
00005a  7861              LDRB     r1,[r4,#1]  ; chipSel
00005c  2061              MOVS     r0,#0x61
00005e  f7fffffe          BL       KT_Bus_Read
;;;1085       KT_Bus_Write(0x0061, regx|KT_BIT1 ,chipSel);
000062  2102              MOVS     r1,#2
000064  4301              ORRS     r1,r1,r0
000066  7862              LDRB     r2,[r4,#1]  ; chipSel
000068  2061              MOVS     r0,#0x61
00006a  f7fffffe          BL       KT_Bus_Write
;;;1086   
;;;1087       regx=KT_Bus_Read(0x0016,chipSel); //S_LO_DIV128_EN;
00006e  7861              LDRB     r1,[r4,#1]  ; chipSel
000070  2016              MOVS     r0,#0x16
000072  f7fffffe          BL       KT_Bus_Read
;;;1088       KT_Bus_Write(0x0016, regx|KT_BIT7 ,chipSel);
000076  2180              MOVS     r1,#0x80
000078  4301              ORRS     r1,r1,r0
00007a  7862              LDRB     r2,[r4,#1]  ; chipSel
00007c  2016              MOVS     r0,#0x16
00007e  f7fffffe          BL       KT_Bus_Write
;;;1089       
;;;1090       
;;;1091   //	TIMER_Delay(TIMER0, 1000); //delay 1ms
;;;1092   	loVcoBandSelRead = KT_Bus_Read(0x001e,chipSel);
000082  7861              LDRB     r1,[r4,#1]  ; chipSel
000084  201e              MOVS     r0,#0x1e
000086  f7fffffe          BL       KT_Bus_Read
;;;1093   	if(loVcoBandSelRead<5)
00008a  2805              CMP      r0,#5
00008c  d202              BCS      |L31.148|
;;;1094   	{
;;;1095   		KT_Bus_Write(0x001e, CLl ,chipSel);//R_LO_VCO_BAND_SEL = CLl;
00008e  7862              LDRB     r2,[r4,#1]  ; chipSel
000090  4629              MOV      r1,r5
000092  e002              B        |L31.154|
                  |L31.148|
000094  1f40              SUBS     r0,r0,#5
;;;1096   	}
;;;1097   	else
;;;1098   	{
;;;1099   		KT_Bus_Write(0x001e, loVcoBandSelRead-5 ,chipSel);//R_LO_VCO_BAND_SEL = CLl;
000096  7862              LDRB     r2,[r4,#1]  ; chipSel
000098  b2c1              UXTB     r1,r0
                  |L31.154|
00009a  201e              MOVS     r0,#0x1e
00009c  f7fffffe          BL       KT_Bus_Write
;;;1100   	}    
;;;1101   
;;;1102   	regx=KT_Bus_Read(0x0042,chipSel); //C_VCOCNT_RST;
0000a0  7861              LDRB     r1,[r4,#1]  ; chipSel
0000a2  2042              MOVS     r0,#0x42
0000a4  f7fffffe          BL       KT_Bus_Read
;;;1103       KT_Bus_Write(0x0042, regx&~KT_BIT5 ,chipSel);
0000a8  21df              MOVS     r1,#0xdf
0000aa  4001              ANDS     r1,r1,r0
0000ac  7862              LDRB     r2,[r4,#1]  ; chipSel
0000ae  2042              MOVS     r0,#0x42
0000b0  f7fffffe          BL       KT_Bus_Write
;;;1104   
;;;1105   	regx=KT_Bus_Read(0x0061,chipSel);
0000b4  7861              LDRB     r1,[r4,#1]  ; chipSel
0000b6  2061              MOVS     r0,#0x61
0000b8  f7fffffe          BL       KT_Bus_Read
;;;1106       KT_Bus_Write(0x0061, regx|KT_BIT6 ,chipSel);  //S_VCOCNT_START;
0000bc  4338              ORRS     r0,r0,r7
0000be  4601              MOV      r1,r0
0000c0  7862              LDRB     r2,[r4,#1]  ; chipSel
0000c2  2061              MOVS     r0,#0x61
0000c4  f7fffffe          BL       KT_Bus_Write
                  |L31.200|
;;;1107       
;;;1108       
;;;1109       while(!(KT_BIT7&KT_Bus_Read(0x0064,chipSel)));//while(!I_VCOCNT_RDY);
0000c8  7861              LDRB     r1,[r4,#1]  ; chipSel
0000ca  2064              MOVS     r0,#0x64
0000cc  f7fffffe          BL       KT_Bus_Read
0000d0  09c0              LSRS     r0,r0,#7
0000d2  d0f9              BEQ      |L31.200|
;;;1110   
;;;1111   	I_VCOCNT_RES_2=(0x0f & KT_Bus_Read(0x0064,chipSel));
0000d4  7861              LDRB     r1,[r4,#1]  ; chipSel
0000d6  2064              MOVS     r0,#0x64
0000d8  f7fffffe          BL       KT_Bus_Read
0000dc  0700              LSLS     r0,r0,#28
;;;1112   	I_VCOCNT_RES_2<<=8;
0000de  0d05              LSRS     r5,r0,#20
;;;1113   	I_VCOCNT_RES_2|=KT_Bus_Read(0x0065,chipSel);
0000e0  7861              LDRB     r1,[r4,#1]  ; chipSel
0000e2  2065              MOVS     r0,#0x65
0000e4  f7fffffe          BL       KT_Bus_Read
0000e8  4328              ORRS     r0,r0,r5
;;;1114   	I_VCOCNT_RES_2<<=8;
0000ea  0205              LSLS     r5,r0,#8
;;;1115   	I_VCOCNT_RES_2|=KT_Bus_Read(0x0066,chipSel);
0000ec  7861              LDRB     r1,[r4,#1]  ; chipSel
0000ee  2066              MOVS     r0,#0x66
0000f0  f7fffffe          BL       KT_Bus_Read
0000f4  4328              ORRS     r0,r0,r5
;;;1116   	I_VCOCNT_RES_2>>=2;
0000f6  1085              ASRS     r5,r0,#2
;;;1117   
;;;1118   	I_VCOFREQ_REF=(0x03 & KT_Bus_Read(0x0067,chipSel));
0000f8  7861              LDRB     r1,[r4,#1]  ; chipSel
0000fa  2067              MOVS     r0,#0x67
0000fc  f7fffffe          BL       KT_Bus_Read
000100  0780              LSLS     r0,r0,#30
;;;1119   	I_VCOFREQ_REF<<=8;
000102  0d86              LSRS     r6,r0,#22
;;;1120   	I_VCOFREQ_REF|=KT_Bus_Read(0x0068,chipSel);
000104  7861              LDRB     r1,[r4,#1]  ; chipSel
000106  2068              MOVS     r0,#0x68
000108  f7fffffe          BL       KT_Bus_Read
00010c  4330              ORRS     r0,r0,r6
;;;1121   	I_VCOFREQ_REF<<=8;
00010e  e000              B        |L31.274|
                  |L31.272|
000110  e09e              B        |L31.592|
                  |L31.274|
000112  0206              LSLS     r6,r0,#8
;;;1122   	I_VCOFREQ_REF|=KT_Bus_Read(0x0069,chipSel);
000114  7861              LDRB     r1,[r4,#1]  ; chipSel
000116  2069              MOVS     r0,#0x69
000118  f7fffffe          BL       KT_Bus_Read
00011c  4330              ORRS     r0,r0,r6
;;;1123   
;;;1124       Tmp[1] = I_VCOCNT_RES_2 - I_VCOFREQ_REF;
00011e  1a2e              SUBS     r6,r5,r0
;;;1125   
;;;1126   	regx=KT_Bus_Read(0x0042,chipSel); //S_VCOCNT_RST
000120  7861              LDRB     r1,[r4,#1]  ; chipSel
000122  2042              MOVS     r0,#0x42
000124  f7fffffe          BL       KT_Bus_Read
;;;1127       KT_Bus_Write(0x0042, regx|KT_BIT5 ,chipSel);
000128  2120              MOVS     r1,#0x20
00012a  4301              ORRS     r1,r1,r0
00012c  7862              LDRB     r2,[r4,#1]  ; chipSel
00012e  2042              MOVS     r0,#0x42
000130  f7fffffe          BL       KT_Bus_Write
                  |L31.308|
;;;1128       
;;;1129       while(1)
;;;1130       {      
;;;1131           regx=KT_Bus_Read(0x001e,chipSel); //R_LO_VCO_BAND_SEL++
000134  7861              LDRB     r1,[r4,#1]  ; chipSel
000136  201e              MOVS     r0,#0x1e
000138  f7fffffe          BL       KT_Bus_Read
00013c  1c40              ADDS     r0,r0,#1
;;;1132       	KT_Bus_Write(0x001e, ++regx ,chipSel);
00013e  b2c1              UXTB     r1,r0
000140  7862              LDRB     r2,[r4,#1]  ; chipSel
000142  201e              MOVS     r0,#0x1e
000144  f7fffffe          BL       KT_Bus_Write
;;;1133   
;;;1134   		regx=KT_Bus_Read(0x0042,chipSel); //C_VCOCNT_RST;
000148  7861              LDRB     r1,[r4,#1]  ; chipSel
00014a  2042              MOVS     r0,#0x42
00014c  f7fffffe          BL       KT_Bus_Read
;;;1135       	KT_Bus_Write(0x0042, regx&~KT_BIT5 ,chipSel);
000150  21df              MOVS     r1,#0xdf
000152  4001              ANDS     r1,r1,r0
000154  7862              LDRB     r2,[r4,#1]  ; chipSel
000156  2042              MOVS     r0,#0x42
000158  f7fffffe          BL       KT_Bus_Write
;;;1136   
;;;1137   		regx=KT_Bus_Read(0x0061,chipSel);
00015c  7861              LDRB     r1,[r4,#1]  ; chipSel
00015e  2061              MOVS     r0,#0x61
000160  f7fffffe          BL       KT_Bus_Read
;;;1138       	KT_Bus_Write(0x0061, regx|KT_BIT6 ,chipSel);  //S_VCOCNT_START;
000164  2140              MOVS     r1,#0x40
000166  4301              ORRS     r1,r1,r0
000168  7862              LDRB     r2,[r4,#1]  ; chipSel
00016a  2061              MOVS     r0,#0x61
00016c  f7fffffe          BL       KT_Bus_Write
                  |L31.368|
;;;1139           
;;;1140           while(!(KT_BIT7&KT_Bus_Read(0x0064,chipSel)));//while(!I_VCOCNT_RDY);
000170  7861              LDRB     r1,[r4,#1]  ; chipSel
000172  2064              MOVS     r0,#0x64
000174  f7fffffe          BL       KT_Bus_Read
000178  09c0              LSRS     r0,r0,#7
00017a  d0f9              BEQ      |L31.368|
;;;1141           Tmp[0] = labs(Tmp[1]);
00017c  0035              MOVS     r5,r6
00017e  d500              BPL      |L31.386|
000180  4275              RSBS     r5,r6,#0
                  |L31.386|
;;;1142   		I_VCOCNT_RES_2=(0x0f & KT_Bus_Read(0x0064,chipSel));
000182  7861              LDRB     r1,[r4,#1]  ; chipSel
000184  2064              MOVS     r0,#0x64
000186  f7fffffe          BL       KT_Bus_Read
00018a  0700              LSLS     r0,r0,#28
;;;1143   		I_VCOCNT_RES_2<<=8;
00018c  0d06              LSRS     r6,r0,#20
;;;1144   		I_VCOCNT_RES_2|=KT_Bus_Read(0x0065,chipSel);
00018e  7861              LDRB     r1,[r4,#1]  ; chipSel
000190  2065              MOVS     r0,#0x65
000192  f7fffffe          BL       KT_Bus_Read
000196  4330              ORRS     r0,r0,r6
;;;1145   		I_VCOCNT_RES_2<<=8;
000198  0206              LSLS     r6,r0,#8
;;;1146   		I_VCOCNT_RES_2|=KT_Bus_Read(0x0066,chipSel);
00019a  7861              LDRB     r1,[r4,#1]  ; chipSel
00019c  2066              MOVS     r0,#0x66
00019e  f7fffffe          BL       KT_Bus_Read
0001a2  4330              ORRS     r0,r0,r6
;;;1147   		I_VCOCNT_RES_2>>=2;
0001a4  1086              ASRS     r6,r0,#2
;;;1148   	
;;;1149   		I_VCOFREQ_REF=(0x03 & KT_Bus_Read(0x0067,chipSel));
0001a6  7861              LDRB     r1,[r4,#1]  ; chipSel
0001a8  2067              MOVS     r0,#0x67
0001aa  f7fffffe          BL       KT_Bus_Read
0001ae  0780              LSLS     r0,r0,#30
;;;1150   		I_VCOFREQ_REF<<=8;
0001b0  0d87              LSRS     r7,r0,#22
;;;1151   		I_VCOFREQ_REF|=KT_Bus_Read(0x0068,chipSel);
0001b2  7861              LDRB     r1,[r4,#1]  ; chipSel
0001b4  2068              MOVS     r0,#0x68
0001b6  f7fffffe          BL       KT_Bus_Read
0001ba  4338              ORRS     r0,r0,r7
;;;1152   		I_VCOFREQ_REF<<=8;
0001bc  0207              LSLS     r7,r0,#8
;;;1153   		I_VCOFREQ_REF|=KT_Bus_Read(0x0069,chipSel);
0001be  7861              LDRB     r1,[r4,#1]  ; chipSel
0001c0  2069              MOVS     r0,#0x69
0001c2  f7fffffe          BL       KT_Bus_Read
0001c6  4338              ORRS     r0,r0,r7
;;;1154           Tmp[1] = I_VCOCNT_RES_2 - I_VCOFREQ_REF;
0001c8  1a36              SUBS     r6,r6,r0
;;;1155           regx=KT_Bus_Read(0x0042,chipSel); //S_VCOCNT_RST
0001ca  7861              LDRB     r1,[r4,#1]  ; chipSel
0001cc  2042              MOVS     r0,#0x42
0001ce  f7fffffe          BL       KT_Bus_Read
;;;1156       	KT_Bus_Write(0x0042, regx|KT_BIT5 ,chipSel);
0001d2  2120              MOVS     r1,#0x20
0001d4  4301              ORRS     r1,r1,r0
0001d6  7862              LDRB     r2,[r4,#1]  ; chipSel
0001d8  2042              MOVS     r0,#0x42
0001da  f7fffffe          BL       KT_Bus_Write
;;;1157   
;;;1158           if((labs(Tmp[1]) >= Tmp[0]) && (Tmp[1] <= 0))
0001de  2e00              CMP      r6,#0
0001e0  db01              BLT      |L31.486|
0001e2  4630              MOV      r0,r6
0001e4  e000              B        |L31.488|
                  |L31.486|
0001e6  4270              RSBS     r0,r6,#0
                  |L31.488|
0001e8  42a8              CMP      r0,r5
0001ea  db0c              BLT      |L31.518|
0001ec  2e00              CMP      r6,#0
0001ee  dc0a              BGT      |L31.518|
;;;1159           {
;;;1160               regx=KT_Bus_Read(0x001e,chipSel); //R_LO_VCO_BAND_SEL--
0001f0  7861              LDRB     r1,[r4,#1]  ; chipSel
0001f2  201e              MOVS     r0,#0x1e
0001f4  f7fffffe          BL       KT_Bus_Read
0001f8  1e40              SUBS     r0,r0,#1
;;;1161       		KT_Bus_Write(0x001e, --regx ,chipSel);
0001fa  b2c1              UXTB     r1,r0
0001fc  7862              LDRB     r2,[r4,#1]  ; chipSel
0001fe  201e              MOVS     r0,#0x1e
000200  f7fffffe          BL       KT_Bus_Write
;;;1162               break;
000204  e006              B        |L31.532|
                  |L31.518|
;;;1163           }
;;;1164           else if(CLh != KT_Bus_Read(0x001e,chipSel))
000206  7861              LDRB     r1,[r4,#1]  ; chipSel
000208  201e              MOVS     r0,#0x1e
00020a  f7fffffe          BL       KT_Bus_Read
00020e  9902              LDR      r1,[sp,#8]
000210  4288              CMP      r0,r1
000212  d18f              BNE      |L31.308|
                  |L31.532|
;;;1165           {
;;;1166               continue;
;;;1167           }
;;;1168           else
;;;1169           {
;;;1170               break;
;;;1171           }
;;;1172       }
;;;1173       regx=KT_Bus_Read(0x001c,chipSel); //C_LO_VCO_BAND_CALI_EN
000214  7861              LDRB     r1,[r4,#1]  ; chipSel
000216  201c              MOVS     r0,#0x1c
000218  f7fffffe          BL       KT_Bus_Read
;;;1174       KT_Bus_Write(0x001c, regx&~KT_BIT6 ,chipSel);
00021c  21bf              MOVS     r1,#0xbf
00021e  4001              ANDS     r1,r1,r0
000220  7862              LDRB     r2,[r4,#1]  ; chipSel
000222  201c              MOVS     r0,#0x1c
000224  f7fffffe          BL       KT_Bus_Write
;;;1175   
;;;1176   	regx=KT_Bus_Read(0x0016,chipSel); //C_LO_DIV128_EN;
000228  7861              LDRB     r1,[r4,#1]  ; chipSel
00022a  2016              MOVS     r0,#0x16
00022c  f7fffffe          BL       KT_Bus_Read
;;;1177       KT_Bus_Write(0x0016, regx&~KT_BIT7 ,chipSel);
000230  0641              LSLS     r1,r0,#25
000232  0e49              LSRS     r1,r1,#25
000234  7862              LDRB     r2,[r4,#1]  ; chipSel
000236  2016              MOVS     r0,#0x16
000238  f7fffffe          BL       KT_Bus_Write
;;;1178   
;;;1179   	regx=KT_Bus_Read(0x0061,chipSel); //C_LOMC_SEL;
00023c  7861              LDRB     r1,[r4,#1]  ; chipSel
00023e  2061              MOVS     r0,#0x61
000240  f7fffffe          BL       KT_Bus_Read
;;;1180       KT_Bus_Write(0x0061, regx&~KT_BIT1 ,chipSel);
000244  21fd              MOVS     r1,#0xfd
000246  4001              ANDS     r1,r1,r0
000248  7862              LDRB     r2,[r4,#1]  ; chipSel
00024a  2061              MOVS     r0,#0x61
00024c  f7fffffe          BL       KT_Bus_Write
                  |L31.592|
;;;1181       
;;;1182       return;
;;;1183   }
000250  bdfe              POP      {r1-r7,pc}
;;;1184   
                          ENDP

000252  0000              DCW      0x0000
                  |L31.596|
                          DCD      ||.data||

                          AREA ||i.Seek_Freq_FastTune||, CODE, READONLY, ALIGN=2

                  Seek_Freq_FastTune PROC
;;;1418   
;;;1419   void Seek_Freq_FastTune(long Freq)
000000  b570              PUSH     {r4-r6,lr}
;;;1420   {
000002  4605              MOV      r5,r0
;;;1421       uint8_t Freq_H,Freq_M,Freq_L,regx;
;;;1422   	if(KT_Bus_Read(0x010f,chipSel)==0x10)//a
000004  4c24              LDR      r4,|L32.152|
000006  20ff              MOVS     r0,#0xff
000008  7861              LDRB     r1,[r4,#1]  ; chipSel
00000a  3010              ADDS     r0,r0,#0x10
00000c  f7fffffe          BL       KT_Bus_Read
000010  2810              CMP      r0,#0x10
000012  d109              BNE      |L32.40|
;;;1423   	{
;;;1424   		regx=KT_Bus_Read(0x0053,chipSel);
000014  7861              LDRB     r1,[r4,#1]  ; chipSel
000016  2053              MOVS     r0,#0x53
000018  f7fffffe          BL       KT_Bus_Read
;;;1425   		KT_Bus_Write(0x0053,regx&~0x40,chipSel);  //rfamp_int_en=0
00001c  21bf              MOVS     r1,#0xbf
00001e  4001              ANDS     r1,r1,r0
000020  7862              LDRB     r2,[r4,#1]  ; chipSel
000022  2053              MOVS     r0,#0x53
000024  f7fffffe          BL       KT_Bus_Write
                  |L32.40|
;;;1426   	} 
;;;1427   #ifdef XTAL_DUAL
;;;1428   	#ifdef NEW_SEL_XTAL_MODE
;;;1429       	caclXtal(Freq);//select xtal
;;;1430   	#else
;;;1431   		oldCaclXtal(Freq);
;;;1432   	#endif
;;;1433   #endif 
;;;1434   	regx=KT_Bus_Read(0x0108,chipSel);
000028  26ff              MOVS     r6,#0xff
00002a  3609              ADDS     r6,r6,#9
00002c  7861              LDRB     r1,[r4,#1]  ; chipSel
00002e  4630              MOV      r0,r6
000030  f7fffffe          BL       KT_Bus_Read
;;;1435       KT_Bus_Write(0x0108,regx | KT_BIT3,chipSel); //SCAN_MODE=1;
000034  2108              MOVS     r1,#8
000036  4301              ORRS     r1,r1,r0
000038  7862              LDRB     r2,[r4,#1]  ; chipSel
00003a  4630              MOV      r0,r6
00003c  f7fffffe          BL       KT_Bus_Write
;;;1436   
;;;1437   	Freq = Freq & 0x000FFFFF;
000040  0328              LSLS     r0,r5,#12
000042  0b00              LSRS     r0,r0,#12
;;;1438   
;;;1439       Freq_H = ( Freq >> 12 );
000044  1301              ASRS     r1,r0,#12
;;;1440       Freq_M = ( (Freq & 0x00000FFF) >> 4 );
;;;1441       Freq_L = ( (Freq & 0x0000000F) << 4 );
;;;1442   
;;;1443       KT_Bus_Write(0x0045,Freq_H,chipSel);                
;;;1444       KT_Bus_Write(0x0046,Freq_M,chipSel);
;;;1445   
;;;1446       regx=KT_Bus_Read(0x0047,chipSel);
;;;1447       KT_Bus_Write(0x0047,(regx & 0x0F) | Freq_L ,chipSel);
;;;1448   
;;;1449       regx=KT_Bus_Read(0x0047,chipSel);
;;;1450       KT_Bus_Write(0x0047,regx | KT_BIT0,chipSel); //chan_valid=1;
;;;1451   	TIMER_Delay(TIMER0, 1000); //delay 10ms
;;;1452   }
000046  052a              LSLS     r2,r5,#20
000048  0700              LSLS     r0,r0,#28             ;1441
00004a  0e15              LSRS     r5,r2,#24             ;1440
00004c  0e06              LSRS     r6,r0,#24             ;1441
00004e  7862              LDRB     r2,[r4,#1]            ;1443  ; chipSel
000050  2045              MOVS     r0,#0x45              ;1443
000052  f7fffffe          BL       KT_Bus_Write
000056  7862              LDRB     r2,[r4,#1]            ;1444  ; chipSel
000058  4629              MOV      r1,r5                 ;1444
00005a  2046              MOVS     r0,#0x46              ;1444
00005c  f7fffffe          BL       KT_Bus_Write
000060  7861              LDRB     r1,[r4,#1]            ;1446  ; chipSel
000062  2047              MOVS     r0,#0x47              ;1446
000064  f7fffffe          BL       KT_Bus_Read
000068  0701              LSLS     r1,r0,#28             ;1447
00006a  0f09              LSRS     r1,r1,#28             ;1447
00006c  4331              ORRS     r1,r1,r6              ;1447
00006e  7862              LDRB     r2,[r4,#1]            ;1447  ; chipSel
000070  2047              MOVS     r0,#0x47              ;1447
000072  f7fffffe          BL       KT_Bus_Write
000076  7861              LDRB     r1,[r4,#1]            ;1449  ; chipSel
000078  2047              MOVS     r0,#0x47              ;1449
00007a  f7fffffe          BL       KT_Bus_Read
00007e  2101              MOVS     r1,#1                 ;1450
000080  4301              ORRS     r1,r1,r0              ;1450
000082  7862              LDRB     r2,[r4,#1]            ;1450  ; chipSel
000084  2047              MOVS     r0,#0x47              ;1450
000086  f7fffffe          BL       KT_Bus_Write
00008a  217d              MOVS     r1,#0x7d              ;1451
00008c  00c9              LSLS     r1,r1,#3              ;1451
00008e  4803              LDR      r0,|L32.156|
000090  f7fffffe          BL       TIMER_Delay
000094  bd70              POP      {r4-r6,pc}
;;;1453   
                          ENDP

000096  0000              DCW      0x0000
                  |L32.152|
                          DCD      ||.data||
                  |L32.156|
                          DCD      0x40010000

                          AREA ||i.pilotMuteRefresh||, CODE, READONLY, ALIGN=2

                  pilotMuteRefresh PROC
;;;1311   //-----------------------------------------------------------------------------
;;;1312   static void  pilotMuteRefresh(void)
000000  b570              PUSH     {r4-r6,lr}
;;;1313   {
;;;1314   	uint8_t regx;
;;;1315   	for(chipSel=0;chipSel<chipNumb;chipSel++)
000002  2000              MOVS     r0,#0
000004  4c17              LDR      r4,|L33.100|
;;;1316   	{
;;;1317   		if(KT_Bus_Read(0x010f,chipSel)==0x10)
000006  25ff              MOVS     r5,#0xff
000008  7060              STRB     r0,[r4,#1]            ;1315
00000a  3510              ADDS     r5,r5,#0x10
                  |L33.12|
00000c  b2c1              UXTB     r1,r0
00000e  4628              MOV      r0,r5
000010  f7fffffe          BL       KT_Bus_Read
000014  2810              CMP      r0,#0x10
000016  d116              BNE      |L33.70|
;;;1318   		{
;;;1319   			if(((0x80&KT_Bus_Read(0x0100,chipSel))==0x80)&&((0x80&KT_Bus_Read(0x0209,chipSel))==0x00))
000018  7861              LDRB     r1,[r4,#1]  ; chipSel
00001a  0100              LSLS     r0,r0,#4
00001c  f7fffffe          BL       KT_Bus_Read
000020  09c0              LSRS     r0,r0,#7
000022  d005              BEQ      |L33.48|
000024  7861              LDRB     r1,[r4,#1]  ; chipSel
000026  4810              LDR      r0,|L33.104|
000028  f7fffffe          BL       KT_Bus_Read
00002c  09c0              LSRS     r0,r0,#7
00002e  d011              BEQ      |L33.84|
                  |L33.48|
;;;1320   			{
;;;1321   				regx=KT_Bus_Read(0x0087,chipSel);
;;;1322   				KT_Bus_Write(0x0087,(regx|0x04),chipSel);
;;;1323   			}
;;;1324   			else
;;;1325   			{
;;;1326   				regx=KT_Bus_Read(0x0087,chipSel);
000030  7861              LDRB     r1,[r4,#1]  ; chipSel
000032  2087              MOVS     r0,#0x87
000034  f7fffffe          BL       KT_Bus_Read
;;;1327   				KT_Bus_Write(0x0087,(regx&~0x04),chipSel);
000038  21fb              MOVS     r1,#0xfb
00003a  4008              ANDS     r0,r0,r1
                  |L33.60|
00003c  4601              MOV      r1,r0
00003e  7862              LDRB     r2,[r4,#1]  ; chipSel
000040  2087              MOVS     r0,#0x87
000042  f7fffffe          BL       KT_Bus_Write
                  |L33.70|
000046  7860              LDRB     r0,[r4,#1]            ;1315  ; chipSel
000048  1c40              ADDS     r0,r0,#1              ;1315
00004a  b2c0              UXTB     r0,r0                 ;1315
00004c  7060              STRB     r0,[r4,#1]            ;1315
00004e  2802              CMP      r0,#2                 ;1315
000050  d3dc              BCC      |L33.12|
;;;1328   			}
;;;1329   		}
;;;1330   	}
;;;1331   }
000052  bd70              POP      {r4-r6,pc}
                  |L33.84|
000054  7861              LDRB     r1,[r4,#1]            ;1321  ; chipSel
000056  2087              MOVS     r0,#0x87              ;1321
000058  f7fffffe          BL       KT_Bus_Read
00005c  2104              MOVS     r1,#4                 ;1322
00005e  4308              ORRS     r0,r0,r1              ;1322
000060  e7ec              B        |L33.60|
;;;1332   
                          ENDP

000062  0000              DCW      0x0000
                  |L33.100|
                          DCD      ||.data||
                  |L33.104|
                          DCD      0x00000209

                          AREA ||i.rfIntCtl||, CODE, READONLY, ALIGN=2

                  rfIntCtl PROC
;;;1279   //-----------------------------------------------------------------------------
;;;1280   void rfIntCtl(void)
000000  b570              PUSH     {r4-r6,lr}
;;;1281   {
;;;1282   	uint8_t regx;
;;;1283   	for(chipSel=0;chipSel<chipNumb;chipSel++)
000002  2000              MOVS     r0,#0
000004  4c13              LDR      r4,|L34.84|
;;;1284   	{
;;;1285   		if(KT_Bus_Read(0x010f,chipSel)==0x10)
000006  25ff              MOVS     r5,#0xff
000008  7060              STRB     r0,[r4,#1]            ;1283
00000a  3510              ADDS     r5,r5,#0x10
                  |L34.12|
00000c  b2c1              UXTB     r1,r0
00000e  4628              MOV      r0,r5
000010  f7fffffe          BL       KT_Bus_Read
000014  2810              CMP      r0,#0x10
000016  d110              BNE      |L34.58|
;;;1286   		{
;;;1287   			if(!(0x7f&KT_Bus_Read(0x005b,chipSel)))
000018  7861              LDRB     r1,[r4,#1]  ; chipSel
00001a  205b              MOVS     r0,#0x5b
00001c  f7fffffe          BL       KT_Bus_Read
;;;1288   			{
;;;1289   				regx=KT_Bus_Read(0x0053,chipSel);
;;;1290   				KT_Bus_Write(0x0053,regx&~0x40,chipSel);
;;;1291   			}
;;;1292   			else
;;;1293   			{
;;;1294   				regx=KT_Bus_Read(0x0053,chipSel);
000020  7861              LDRB     r1,[r4,#1]  ; chipSel
000022  0640              LSLS     r0,r0,#25             ;1287
000024  d010              BEQ      |L34.72|
000026  2053              MOVS     r0,#0x53
000028  f7fffffe          BL       KT_Bus_Read
;;;1295   				KT_Bus_Write(0x0053,regx|0x40,chipSel);
00002c  2140              MOVS     r1,#0x40
00002e  4308              ORRS     r0,r0,r1
                  |L34.48|
000030  4601              MOV      r1,r0                 ;1290
000032  7862              LDRB     r2,[r4,#1]            ;1290  ; chipSel
000034  2053              MOVS     r0,#0x53              ;1290
000036  f7fffffe          BL       KT_Bus_Write
                  |L34.58|
00003a  7860              LDRB     r0,[r4,#1]            ;1283  ; chipSel
00003c  1c40              ADDS     r0,r0,#1              ;1283
00003e  b2c0              UXTB     r0,r0                 ;1283
000040  7060              STRB     r0,[r4,#1]            ;1283
000042  2802              CMP      r0,#2                 ;1283
000044  d3e2              BCC      |L34.12|
;;;1296   			}
;;;1297   		}
;;;1298   	}
;;;1299   }
000046  bd70              POP      {r4-r6,pc}
                  |L34.72|
000048  2053              MOVS     r0,#0x53              ;1289
00004a  f7fffffe          BL       KT_Bus_Read
00004e  21bf              MOVS     r1,#0xbf              ;1290
000050  4008              ANDS     r0,r0,r1              ;1290
000052  e7ed              B        |L34.48|
;;;1300   
                          ENDP

                  |L34.84|
                          DCD      ||.data||

                          AREA ||i.snrMuteRefresh||, CODE, READONLY, ALIGN=2

                  snrMuteRefresh PROC
;;;1376   //-----------------------------------------------------------------------------
;;;1377   static void  snrMuteRefresh(void)
000000  b5f8              PUSH     {r3-r7,lr}
;;;1378   {
;;;1379   	uint8_t regx;
;;;1380   	for(chipSel=0;chipSel<chipNumb;chipSel++)
000002  2000              MOVS     r0,#0
000004  4c1e              LDR      r4,|L35.128|
;;;1381   	{
;;;1382   		if(KT_Bus_Read(0x010f,chipSel)==0x10)
000006  26ff              MOVS     r6,#0xff
000008  3610              ADDS     r6,r6,#0x10
;;;1383   		{
;;;1384   			if(((KT_Bus_Read(0x0100,chipSel)&0x20)==0x20)&&(KT_Bus_Read(0x020D,chipSel)<=AUTOMUTE_SNR_LOWTH))
00000a  4f1e              LDR      r7,|L35.132|
00000c  25ff              MOVS     r5,#0xff
00000e  7060              STRB     r0,[r4,#1]            ;1380
000010  3501              ADDS     r5,#1
                  |L35.18|
000012  b2c1              UXTB     r1,r0                 ;1382
000014  4630              MOV      r0,r6                 ;1382
000016  f7fffffe          BL       KT_Bus_Read
00001a  2810              CMP      r0,#0x10              ;1382
00001c  d129              BNE      |L35.114|
00001e  7861              LDRB     r1,[r4,#1]  ; chipSel
000020  4628              MOV      r0,r5
000022  f7fffffe          BL       KT_Bus_Read
000026  0680              LSLS     r0,r0,#26
000028  d50c              BPL      |L35.68|
00002a  7861              LDRB     r1,[r4,#1]  ; chipSel
00002c  4638              MOV      r0,r7
00002e  f7fffffe          BL       KT_Bus_Read
000032  2878              CMP      r0,#0x78
000034  d806              BHI      |L35.68|
;;;1385   			{
;;;1386   				regx=KT_Bus_Read(0x0087,chipSel);
000036  7861              LDRB     r1,[r4,#1]  ; chipSel
000038  2087              MOVS     r0,#0x87
00003a  f7fffffe          BL       KT_Bus_Read
;;;1387   				KT_Bus_Write(0x0087,(regx|0x02),chipSel);
00003e  2102              MOVS     r1,#2
000040  4308              ORRS     r0,r0,r1
000042  e011              B        |L35.104|
                  |L35.68|
;;;1388   			}
;;;1389   			else if((KT_Bus_Read(0x020D,chipSel)>=AUTOMUTE_SNR_HIGHTH)||((KT_Bus_Read(0x0100,chipSel)&0x20)==0x00))
000044  7861              LDRB     r1,[r4,#1]  ; chipSel
000046  4638              MOV      r0,r7
000048  f7fffffe          BL       KT_Bus_Read
00004c  2880              CMP      r0,#0x80
00004e  d205              BCS      |L35.92|
000050  7861              LDRB     r1,[r4,#1]  ; chipSel
000052  4628              MOV      r0,r5
000054  f7fffffe          BL       KT_Bus_Read
000058  0680              LSLS     r0,r0,#26
00005a  d40a              BMI      |L35.114|
                  |L35.92|
;;;1390   			{
;;;1391   				regx=KT_Bus_Read(0x0087,chipSel);
00005c  7861              LDRB     r1,[r4,#1]  ; chipSel
00005e  2087              MOVS     r0,#0x87
000060  f7fffffe          BL       KT_Bus_Read
;;;1392   				KT_Bus_Write(0x0087,(regx&~0x02),chipSel);
000064  21fd              MOVS     r1,#0xfd
000066  4008              ANDS     r0,r0,r1
                  |L35.104|
000068  4601              MOV      r1,r0
00006a  7862              LDRB     r2,[r4,#1]  ; chipSel
00006c  2087              MOVS     r0,#0x87
00006e  f7fffffe          BL       KT_Bus_Write
                  |L35.114|
000072  7860              LDRB     r0,[r4,#1]            ;1380  ; chipSel
000074  1c40              ADDS     r0,r0,#1              ;1380
000076  b2c0              UXTB     r0,r0                 ;1380
000078  7060              STRB     r0,[r4,#1]            ;1380
00007a  2802              CMP      r0,#2                 ;1380
00007c  d3c9              BCC      |L35.18|
;;;1393   			}
;;;1394   			else
;;;1395   			{
;;;1396   			}
;;;1397   		}
;;;1398   	}
;;;1399   }
00007e  bdf8              POP      {r3-r7,pc}
;;;1400   
                          ENDP

                  |L35.128|
                          DCD      ||.data||
                  |L35.132|
                          DCD      0x0000020d

                          AREA ||.data||, DATA, ALIGN=2

                  MorSSelect
000000  01                DCB      0x01
                  chipSel
000001  00                DCB      0x00
                  Flag_PKGSYNC
000002  0000              DCB      0x00,0x00
                  soundA
                          DCD      0x000b4b36
000008  00000001          DCB      0x00,0x00,0x00,0x01
00000c  010a170c          DCB      0x01,0x0a,0x17,0x0c
000010  0c0c0c0c          DCB      0x0c,0x0c,0x0c,0x0c
000014  0c0c0c0c          DCB      0x0c,0x0c,0x0c,0x0c
000018  0c0c0c0c          DCB      0x0c,0x0c,0x0c,0x0c
00001c  0c0c0101          DCB      0x0c,0x0c,0x01,0x01
                  soundB
                          DCD      0x000b85ce
000024  00000001          DCB      0x00,0x00,0x00,0x01
000028  010a170c          DCB      0x01,0x0a,0x17,0x0c
00002c  0c0c0c0c          DCB      0x0c,0x0c,0x0c,0x0c
000030  0c0c0c0c          DCB      0x0c,0x0c,0x0c,0x0c
000034  0c0c0c0c          DCB      0x0c,0x0c,0x0c,0x0c
000038  0c0c0101          DCB      0x0c,0x0c,0x01,0x01

                          AREA ||area_number.39||, DATA, ALIGN=0

                          EXPORTAS ||area_number.39||, ||.data||
                  chipAI2sConfig
000000  01000001          DCB      0x01,0x00,0x00,0x01
000004  010102            DCB      0x01,0x01,0x02

                          AREA ||area_number.40||, DATA, ALIGN=0

                          EXPORTAS ||area_number.40||, ||.data||
                  chipBI2sConfig
000000  01000101          DCB      0x01,0x00,0x01,0x01
000004  000102            DCB      0x00,0x01,0x02

;*** Start embedded assembler ***

#line 1 "..\\src\\driver\\drv_KT_WirelessMicRx.c"
	AREA ||.rev16_text||, CODE
	THUMB
	EXPORT |__asm___22_drv_KT_WirelessMicRx_c_0ac08181____REV16|
#line 388 "..\\lib\\CMSIS\\Include\\cmsis_armcc.h"
|__asm___22_drv_KT_WirelessMicRx_c_0ac08181____REV16| PROC
#line 389

 rev16 r0, r0
 bx lr
	ENDP
	AREA ||.revsh_text||, CODE
	THUMB
	EXPORT |__asm___22_drv_KT_WirelessMicRx_c_0ac08181____REVSH|
#line 402
|__asm___22_drv_KT_WirelessMicRx_c_0ac08181____REVSH| PROC
#line 403

 revsh r0, r0
 bx lr
	ENDP

;*** End   embedded assembler ***
